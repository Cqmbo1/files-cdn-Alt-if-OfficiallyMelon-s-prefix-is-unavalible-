/*! For license information please see sgri.21.b5765006.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbloxd=self.webpackChunkbloxd||[]).push([[21],{3916:(p,h,r)=>{r.d(h,{$:()=>M,D:()=>s,E:()=>x,H:()=>P,L:()=>y,O:()=>k,R:()=>H,T:()=>X,U:()=>U,Y:()=>E,b:()=>G,bb:()=>I,cb:()=>N,e:()=>K,eb:()=>Z,h:()=>W,hb:()=>j,j:()=>c,l:()=>v,p:()=>C,t:()=>F,v:()=>w,w:()=>t,z:()=>i});const m=function(p){const h=[];let r=0;for(let m=0;m<p.length;m++){let L=p.charCodeAt(m);L<128?h[r++]=L:L<2048?(h[r++]=L>>6|192,h[r++]=63&L|128):55296===(64512&L)&&m+1<p.length&&56320===(64512&p.charCodeAt(m+1))?(L=65536+((1023&L)<<10)+(1023&p.charCodeAt(++m)),h[r++]=L>>18|240,h[r++]=L>>12&63|128,h[r++]=L>>6&63|128,h[r++]=63&L|128):(h[r++]=L>>12|224,h[r++]=L>>6&63|128,h[r++]=63&L|128)}return h},L={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(p,h){if(!Array.isArray(p))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=h?this.byteToCharMapWebSafe_:this.byteToCharMap_,m=[];for(let h=0;h<p.length;h+=3){const L=p[h],z=h+1<p.length,C=z?p[h+1]:0,v=h+2<p.length,O=v?p[h+2]:0,T=L>>2,x=(3&L)<<4|C>>4;let s=(15&C)<<2|O>>6,P=63&O;v||(P=64,z||(s=64)),m.push(r[T],r[x],r[s],r[P])}return m.join("")},encodeString(p,h){return this.HAS_NATIVE_SUPPORT&&!h?btoa(p):this.encodeByteArray(m(p),h)},decodeString(p,h){return this.HAS_NATIVE_SUPPORT&&!h?atob(p):function(p){const h=[];let r=0,m=0;for(;r<p.length;){const L=p[r++];if(L<128)h[m++]=String.fromCharCode(L);else if(L>191&&L<224){const z=p[r++];h[m++]=String.fromCharCode((31&L)<<6|63&z)}else if(L>239&&L<365){const z=((7&L)<<18|(63&p[r++])<<12|(63&p[r++])<<6|63&p[r++])-65536;h[m++]=String.fromCharCode(55296+(z>>10)),h[m++]=String.fromCharCode(56320+(1023&z))}else{const z=p[r++],C=p[r++];h[m++]=String.fromCharCode((15&L)<<12|(63&z)<<6|63&C)}}return h.join("")}(this.decodeStringToByteArray(p,h))},decodeStringToByteArray(p,h){this.init_();const r=h?this.charToByteMapWebSafe_:this.charToByteMap_,m=[];for(let h=0;h<p.length;){const L=r[p.charAt(h++)],C=h<p.length?r[p.charAt(h)]:0;++h;const v=h<p.length?r[p.charAt(h)]:64;++h;const O=h<p.length?r[p.charAt(h)]:64;if(++h,null==L||null==C||null==v||null==O)throw new z;const T=L<<2|C>>4;if(m.push(T),64!==v){const p=C<<4&240|v>>2;if(m.push(p),64!==O){const p=v<<6&192|O;m.push(p)}}}return m},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let p=0;p<this.ENCODED_VALS.length;p++)this.byteToCharMap_[p]=this.ENCODED_VALS.charAt(p),this.charToByteMap_[this.byteToCharMap_[p]]=p,this.byteToCharMapWebSafe_[p]=this.ENCODED_VALS_WEBSAFE.charAt(p),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[p]]=p,p>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(p)]=p,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(p)]=p)}}};class z extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const C=function(p){return function(p){const h=m(p);return L.encodeByteArray(h,!0)}(p).replace(/\./g,"")},v=function(p){try{return L.decodeString(p,!0)}catch(p){console.error("base64Decode failed: ",p)}return null};const O=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,T=()=>{try{return O()||(()=>{if("undefined"===typeof process)return;const p={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_IS_CLIENT:"true",REACT_APP_INDEXPASS:"0.0feyntt34l1",REACT_APP_INDEXPASS_BTOA:"MC4wZmV5bnR0MzRsMQ==",REACT_APP_INDEXPASS_CAESAR5:"535kjdsyy89q6",REACT_APP_RANDSTR1:"0.c9a9ri53b9n",REACT_APP_RANDSTR2:"0.6ut78zl1fk3",REACT_APP_RANDSTR3:"0.j56dkryjl6o",REACT_APP_RANDSTR4:"0.ty10vaipqb"}.__FIREBASE_DEFAULTS__;return p?JSON.parse(p):void 0})()||(()=>{if("undefined"===typeof document)return;let p;try{p=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(p){return}const h=p&&v(p[1]);return h&&JSON.parse(h)})()}catch(p){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${p}`)}},x=p=>{var h,r;return null===(r=null===(h=T())||void 0===h?void 0:h.emulatorHosts)||void 0===r?void 0:r[p]},s=()=>{var p;return null===(p=T())||void 0===p?void 0:p.config},P=p=>{var h;return null===(h=T())||void 0===h?void 0:h[`_${p}`]};class G{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((p,h)=>{this.resolve=p,this.reject=h}))}wrapCallback(p){return(h,r)=>{h?this.reject(h):this.resolve(r),"function"===typeof p&&(this.promise.catch((()=>{})),1===p.length?p(h):p(h,r))}}}function k(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function M(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())}function H(){const p="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof p&&void 0!==p.id}function I(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function U(){const p=k();return p.indexOf("MSIE ")>=0||p.indexOf("Trident/")>=0}function E(){try{return"object"===typeof indexedDB}catch(p){return!1}}function j(){return new Promise(((p,h)=>{try{let r=!0;const m="validate-browser-context-for-indexeddb-analytics-module",L=self.indexedDB.open(m);L.onsuccess=()=>{L.result.close(),r||self.indexedDB.deleteDatabase(m),p(!0)},L.onupgradeneeded=()=>{r=!1},L.onerror=()=>{var p;h((null===(p=L.error)||void 0===p?void 0:p.message)||"")}}catch(p){h(p)}}))}function c(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class W extends Error{constructor(p,h,r){super(h),this.code=p,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,W.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K.prototype.create)}}class K{constructor(p,h,r){this.service=p,this.serviceName=h,this.errors=r}create(p){const h=(arguments.length<=1?void 0:arguments[1])||{},r=`${this.service}/${p}`,m=this.errors[p],L=m?function(p,h){return p.replace(A,((p,r)=>{const m=h[r];return null!=m?String(m):`<${r}?>`}))}(m,h):"Error",z=`${this.serviceName}: ${L} (${r}).`;return new W(r,z,h)}}const A=/\{\$([^}]+)}/g;function X(p){for(const h in p)if(Object.prototype.hasOwnProperty.call(p,h))return!1;return!0}function t(p,h){if(p===h)return!0;const r=Object.keys(p),m=Object.keys(h);for(const L of r){if(!m.includes(L))return!1;const r=p[L],z=h[L];if(f(r)&&f(z)){if(!t(r,z))return!1}else if(r!==z)return!1}for(const p of m)if(!r.includes(p))return!1;return!0}function f(p){return null!==p&&"object"===typeof p}function Z(p){const h=[];for(const[r,m]of Object.entries(p))Array.isArray(m)?m.forEach((p=>{h.push(encodeURIComponent(r)+"="+encodeURIComponent(p))})):h.push(encodeURIComponent(r)+"="+encodeURIComponent(m));return h.length?"&"+h.join("&"):""}function N(p){const h={};return p.replace(/^\?/,"").split("&").forEach((p=>{if(p){const[r,m]=p.split("=");h[decodeURIComponent(r)]=decodeURIComponent(m)}})),h}function i(p){const h=p.indexOf("?");if(!h)return"";const r=p.indexOf("#",h);return p.substring(h,r>0?r:void 0)}function w(p,h){const r=new S(p,h);return r.subscribe.bind(r)}class S{constructor(p,h){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=h,this.task.then((()=>{p(this)})).catch((p=>{this.error(p)}))}next(p){this.forEachObserver((h=>{h.next(p)}))}error(p){this.forEachObserver((h=>{h.error(p)})),this.close(p)}complete(){this.forEachObserver((p=>{p.complete()})),this.close()}subscribe(p,h,r){let m;if(void 0===p&&void 0===h&&void 0===r)throw new Error("Missing Observer.");m=function(p,h){if("object"!==typeof p||null===p)return!1;for(const r of h)if(r in p&&"function"===typeof p[r])return!0;return!1}(p,["next","error","complete"])?p:{next:p,error:h,complete:r},void 0===m.next&&(m.next=Q),void 0===m.error&&(m.error=Q),void 0===m.complete&&(m.complete=Q);const L=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?m.error(this.finalError):m.complete()}catch(p){}})),this.observers.push(m),L}unsubscribeOne(p){void 0!==this.observers&&void 0!==this.observers[p]&&(delete this.observers[p],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(p){if(!this.finalized)for(let h=0;h<this.observers.length;h++)this.sendOne(h,p)}sendOne(p,h){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[p])try{h(this.observers[p])}catch(p){"undefined"!==typeof console&&console.error&&console.error(p)}}))}close(p){this.finalized||(this.finalized=!0,void 0!==p&&(this.finalError=p),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Q(){}const J=1e3,o=2,d=144e5,e=.5;function F(p){let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;const r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:J)*Math.pow(h,p),m=Math.round(e*r*(Math.random()-.5)*2);return Math.min(d,r+m)}function y(p){return p&&p._delegate?p._delegate:p}},3899:(p,h,r)=>{r.d(h,{d:()=>Op,f:()=>Lp,g:()=>mp,j:()=>xp,k:()=>Tp,m:()=>sp});var m=r(3908),L=r(3923),z=r(3916);let C,v;const O=new WeakMap,T=new WeakMap,x=new WeakMap,s=new WeakMap,P=new WeakMap;let G={get(p,h,r){if(p instanceof IDBTransaction){if("done"===h)return T.get(p);if("objectStoreNames"===h)return p.objectStoreNames||x.get(p);if("store"===h)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return H(p[h])},set:(p,h,r)=>(p[h]=r,!0),has:(p,h)=>p instanceof IDBTransaction&&("done"===h||"store"===h)||h in p};function k(p){return p!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(v||(v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(p)?function(){for(var h=arguments.length,r=new Array(h),m=0;m<h;m++)r[m]=arguments[m];return p.apply(I(this),r),H(O.get(this))}:function(){for(var h=arguments.length,r=new Array(h),m=0;m<h;m++)r[m]=arguments[m];return H(p.apply(I(this),r))}:function(h){for(var r=arguments.length,m=new Array(r>1?r-1:0),L=1;L<r;L++)m[L-1]=arguments[L];const z=p.call(I(this),h,...m);return x.set(z,h.sort?h.sort():[h]),H(z)}}function M(p){return"function"===typeof p?k(p):(p instanceof IDBTransaction&&function(p){if(T.has(p))return;const h=new Promise(((h,r)=>{const m=()=>{p.removeEventListener("complete",L),p.removeEventListener("error",z),p.removeEventListener("abort",z)},L=()=>{h(),m()},z=()=>{r(p.error||new DOMException("AbortError","AbortError")),m()};p.addEventListener("complete",L),p.addEventListener("error",z),p.addEventListener("abort",z)}));T.set(p,h)}(p),h=p,(C||(C=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((p=>h instanceof p))?new Proxy(p,G):p);var h}function H(p){if(p instanceof IDBRequest)return function(p){const h=new Promise(((h,r)=>{const m=()=>{p.removeEventListener("success",L),p.removeEventListener("error",z)},L=()=>{h(H(p.result)),m()},z=()=>{r(p.error),m()};p.addEventListener("success",L),p.addEventListener("error",z)}));return h.then((h=>{h instanceof IDBCursor&&O.set(h,p)})).catch((()=>{})),P.set(h,p),h}(p);if(s.has(p))return s.get(p);const h=M(p);return h!==p&&(s.set(p,h),P.set(h,p)),h}const I=p=>P.get(p);const U=["get","getKey","getAll","getAllKeys","count"],E=["put","add","delete","clear"],j=new Map;function c(p,h){if(!(p instanceof IDBDatabase)||h in p||"string"!==typeof h)return;if(j.get(h))return j.get(h);const r=h.replace(/FromIndex$/,""),m=h!==r,L=E.includes(r);if(!(r in(m?IDBIndex:IDBObjectStore).prototype)||!L&&!U.includes(r))return;const z=async function(p){const h=this.transaction(p,L?"readwrite":"readonly");let z=h.store;for(var C=arguments.length,v=new Array(C>1?C-1:0),O=1;O<C;O++)v[O-1]=arguments[O];return m&&(z=z.index(v.shift())),(await Promise.all([z[r](...v),L&&h.done]))[0]};return j.set(h,z),z}G=(p=>({...p,get:(h,r,m)=>c(h,r)||p.get(h,r,m),has:(h,r)=>!!c(h,r)||p.has(h,r)}))(G);class W{constructor(p){this.container=p}getPlatformInfoString(){return this.container.getProviders().map((p=>{if(function(p){const h=p.getComponent();return"VERSION"===(null===h||void 0===h?void 0:h.type)}(p)){const h=p.getImmediate();return`${h.library}/${h.version}`}return null})).filter((p=>p)).join(" ")}}const K="@firebase/app",A="0.9.13",X=new L.g("@firebase/app"),t="@firebase/app-compat",f="@firebase/analytics-compat",Z="@firebase/analytics",N="@firebase/app-check-compat",i="@firebase/app-check",w="@firebase/auth",S="@firebase/auth-compat",Q="@firebase/database",J="@firebase/database-compat",o="@firebase/functions",d="@firebase/functions-compat",e="@firebase/installations",F="@firebase/installations-compat",y="@firebase/messaging",V="@firebase/messaging-compat",n="@firebase/performance",a="@firebase/performance-compat",B="@firebase/remote-config",u="@firebase/remote-config-compat",g="@firebase/storage",q="@firebase/storage-compat",R="@firebase/firestore",l="@firebase/firestore-compat",Y="firebase",D="[DEFAULT]",b={[K]:"fire-core",[t]:"fire-core-compat",[Z]:"fire-analytics",[f]:"fire-analytics-compat",[i]:"fire-app-check",[N]:"fire-app-check-compat",[w]:"fire-auth",[S]:"fire-auth-compat",[Q]:"fire-rtdb",[J]:"fire-rtdb-compat",[o]:"fire-fn",[d]:"fire-fn-compat",[e]:"fire-iid",[F]:"fire-iid-compat",[y]:"fire-fcm",[V]:"fire-fcm-compat",[n]:"fire-perf",[a]:"fire-perf-compat",[B]:"fire-rc",[u]:"fire-rc-compat",[g]:"fire-gcs",[q]:"fire-gcs-compat",[R]:"fire-fst",[l]:"fire-fst-compat","fire-js":"fire-js",[Y]:"fire-js-all"},pp=new Map,hp=new Map;function rp(p,h){try{p.container.addComponent(h)}catch(r){X.debug(`Component ${h.name} failed to register with FirebaseApp ${p.name}`,r)}}function mp(p){const h=p.name;if(hp.has(h))return X.debug(`There were multiple attempts to register component ${h}.`),!1;hp.set(h,p);for(const h of pp.values())rp(h,p);return!0}function Lp(p,h){const r=p.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),p.container.getProvider(h)}const zp={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Cp=new z.e("app","Firebase",zp);class vp{constructor(p,h,r){this._isDeleted=!1,this._options=Object.assign({},p),this._config=Object.assign({},h),this._name=h.name,this._automaticDataCollectionEnabled=h.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new m.g("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(p){this.checkDestroyed(),this._automaticDataCollectionEnabled=p}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(p){this._isDeleted=p}checkDestroyed(){if(this.isDeleted)throw Cp.create("app-deleted",{appName:this._name})}}const Op="9.23.0";function Tp(p){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=p;if("object"!==typeof h){h={name:h}}const L=Object.assign({name:D,automaticDataCollectionEnabled:!1},h),C=L.name;if("string"!==typeof C||!C)throw Cp.create("bad-app-name",{appName:String(C)});if(r||(r=(0,z.D)()),!r)throw Cp.create("no-options");const v=pp.get(C);if(v){if((0,z.w)(r,v.options)&&(0,z.w)(L,v.config))return v;throw Cp.create("duplicate-app",{appName:C})}const O=new m.e(C);for(const p of hp.values())O.addComponent(p);const T=new vp(r,L,O);return pp.set(C,T),T}function xp(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D;const h=pp.get(p);if(!h&&p===D&&(0,z.D)())return Tp();if(!h)throw Cp.create("no-app",{appName:p});return h}function sp(p,h,r){var L;let z=null!==(L=b[p])&&void 0!==L?L:p;r&&(z+=`-${r}`);const C=z.match(/\s|\//),v=h.match(/\s|\//);if(C||v){const p=[`Unable to register library "${z}" with version "${h}":`];return C&&p.push(`library name "${z}" contains illegal characters (whitespace or "/")`),C&&v&&p.push("and"),v&&p.push(`version name "${h}" contains illegal characters (whitespace or "/")`),void X.warn(p.join(" "))}mp(new m.g(`${z}-version`,(()=>({library:z,version:h})),"VERSION"))}const Pp="firebase-heartbeat-store";let Gp=null;function kp(){return Gp||(Gp=function(p,h){let{blocked:r,upgrade:m,blocking:L,terminated:z}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const C=indexedDB.open(p,h),v=H(C);return m&&C.addEventListener("upgradeneeded",(p=>{m(H(C.result),p.oldVersion,p.newVersion,H(C.transaction),p)})),r&&C.addEventListener("blocked",(p=>r(p.oldVersion,p.newVersion,p))),v.then((p=>{z&&p.addEventListener("close",(()=>z())),L&&p.addEventListener("versionchange",(p=>L(p.oldVersion,p.newVersion,p)))})).catch((()=>{})),v}("firebase-heartbeat-database",1,{upgrade:(p,h)=>{if(0===h)p.createObjectStore(Pp)}}).catch((p=>{throw Cp.create("idb-open",{originalErrorMessage:p.message})}))),Gp}async function Mp(p,h){try{const r=(await kp()).transaction(Pp,"readwrite"),m=r.objectStore(Pp);await m.put(h,Hp(p)),await r.done}catch(p){if(p instanceof z.h)X.warn(p.message);else{const h=Cp.create("idb-set",{originalErrorMessage:null===p||void 0===p?void 0:p.message});X.warn(h.message)}}}function Hp(p){return`${p.name}!${p.options.appId}`}class Ip{constructor(p){this.container=p,this._heartbeatsCache=null;const h=this.container.getProvider("app").getImmediate();this._storage=new Ep(h),this._heartbeatsCachePromise=this._storage.read().then((p=>(this._heartbeatsCache=p,p)))}async triggerHeartbeat(){const p=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=Up();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==h&&!this._heartbeatsCache.heartbeats.some((p=>p.date===h)))return this._heartbeatsCache.heartbeats.push({date:h,agent:p}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((p=>{const h=new Date(p.date).valueOf();return Date.now()-h<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const p=Up(),{heartbeatsToSend:h,unsentEntries:r}=function(p){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const r=[];let m=p.slice();for(const L of p){const p=r.find((p=>p.agent===L.agent));if(p){if(p.dates.push(L.date),jp(r)>h){p.dates.pop();break}}else if(r.push({agent:L.agent,dates:[L.date]}),jp(r)>h){r.pop();break}m=m.slice(1)}return{heartbeatsToSend:r,unsentEntries:m}}(this._heartbeatsCache.heartbeats),m=(0,z.p)(JSON.stringify({version:2,heartbeats:h}));return this._heartbeatsCache.lastSentHeartbeatDate=p,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),m}}function Up(){return(new Date).toISOString().substring(0,10)}class Ep{constructor(p){this.app=p,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,z.Y)()&&(0,z.hb)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(p){try{const h=await kp();return await h.transaction(Pp).objectStore(Pp).get(Hp(p))}catch(p){if(p instanceof z.h)X.warn(p.message);else{const h=Cp.create("idb-get",{originalErrorMessage:null===p||void 0===p?void 0:p.message});X.warn(h.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(p){var h;if(await this._canUseIndexedDBPromise){const r=await this.read();return Mp(this.app,{lastSentHeartbeatDate:null!==(h=p.lastSentHeartbeatDate)&&void 0!==h?h:r.lastSentHeartbeatDate,heartbeats:p.heartbeats})}}async add(p){var h;if(await this._canUseIndexedDBPromise){const r=await this.read();return Mp(this.app,{lastSentHeartbeatDate:null!==(h=p.lastSentHeartbeatDate)&&void 0!==h?h:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...p.heartbeats]})}}}function jp(p){return(0,z.p)(JSON.stringify({version:2,heartbeats:p})).length}var cp;cp="",mp(new m.g("platform-logger",(p=>new W(p)),"PRIVATE")),mp(new m.g("heartbeat",(p=>new Ip(p)),"PRIVATE")),sp(K,A,cp),sp(K,A,"esm2017"),sp("fire-js","")},3908:(p,h,r)=>{r.d(h,{e:()=>v,g:()=>L});var m=r(3916);class L{constructor(p,h,r){this.name=p,this.instanceFactory=h,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(p){return this.instantiationMode=p,this}setMultipleInstances(p){return this.multipleInstances=p,this}setServiceProps(p){return this.serviceProps=p,this}setInstanceCreatedCallback(p){return this.onInstanceCreated=p,this}}const z="[DEFAULT]";class C{constructor(p,h){this.name=p,this.container=h,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(p){const h=this.normalizeInstanceIdentifier(p);if(!this.instancesDeferred.has(h)){const p=new m.b;if(this.instancesDeferred.set(h,p),this.isInitialized(h)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:h});r&&p.resolve(r)}catch(p){}}return this.instancesDeferred.get(h).promise}getImmediate(p){var h;const r=this.normalizeInstanceIdentifier(null===p||void 0===p?void 0:p.identifier),m=null!==(h=null===p||void 0===p?void 0:p.optional)&&void 0!==h&&h;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(m)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(p){if(m)return null;throw p}}getComponent(){return this.component}setComponent(p){if(p.name!==this.name)throw Error(`Mismatching Component ${p.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=p,this.shouldAutoInitialize()){if(function(p){return"EAGER"===p.instantiationMode}(p))try{this.getOrInitializeService({instanceIdentifier:z})}catch(p){}for(const[p,h]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(p);try{const p=this.getOrInitializeService({instanceIdentifier:r});h.resolve(p)}catch(p){}}}}clearInstance(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;this.instancesDeferred.delete(p),this.instancesOptions.delete(p),this.instances.delete(p)}async delete(){const p=Array.from(this.instances.values());await Promise.all([...p.filter((p=>"INTERNAL"in p)).map((p=>p.INTERNAL.delete())),...p.filter((p=>"_delete"in p)).map((p=>p._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;return this.instances.has(p)}getOptions(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;return this.instancesOptions.get(p)||{}}initialize(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:h={}}=p,r=this.normalizeInstanceIdentifier(p.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const m=this.getOrInitializeService({instanceIdentifier:r,options:h});for(const[p,h]of this.instancesDeferred.entries()){r===this.normalizeInstanceIdentifier(p)&&h.resolve(m)}return m}onInit(p,h){var r;const m=this.normalizeInstanceIdentifier(h),L=null!==(r=this.onInitCallbacks.get(m))&&void 0!==r?r:new Set;L.add(p),this.onInitCallbacks.set(m,L);const z=this.instances.get(m);return z&&p(z,m),()=>{L.delete(p)}}invokeOnInitCallbacks(p,h){const r=this.onInitCallbacks.get(h);if(r)for(const m of r)try{m(p,h)}catch(p){}}getOrInitializeService(p){let{instanceIdentifier:h,options:r={}}=p,m=this.instances.get(h);if(!m&&this.component&&(m=this.component.instanceFactory(this.container,{instanceIdentifier:(L=h,L===z?void 0:L),options:r}),this.instances.set(h,m),this.instancesOptions.set(h,r),this.invokeOnInitCallbacks(m,h),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,h,m)}catch(p){}var L;return m||null}normalizeInstanceIdentifier(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;return this.component?this.component.multipleInstances?p:z:p}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class v{constructor(p){this.name=p,this.providers=new Map}addComponent(p){const h=this.getProvider(p.name);if(h.isComponentSet())throw new Error(`Component ${p.name} has already been registered with ${this.name}`);h.setComponent(p)}addOrOverwriteComponent(p){this.getProvider(p.name).isComponentSet()&&this.providers.delete(p.name),this.addComponent(p)}getProvider(p){if(this.providers.has(p))return this.providers.get(p);const h=new C(p,this);return this.providers.set(p,h),h}getProviders(){return Array.from(this.providers.values())}}},3923:(p,h,r)=>{r.d(h,{e:()=>L,g:()=>T});const m=[];var L;!function(p){p[p.DEBUG=0]="DEBUG",p[p.VERBOSE=1]="VERBOSE",p[p.INFO=2]="INFO",p[p.WARN=3]="WARN",p[p.ERROR=4]="ERROR",p[p.SILENT=5]="SILENT"}(L||(L={}));const z={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},C=L.INFO,v={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},O=function(p,h){if(h<p.logLevel)return;const r=(new Date).toISOString(),m=v[h];if(!m)throw new Error(`Attempted to log a message with an invalid logType (value: ${h})`);for(var L=arguments.length,z=new Array(L>2?L-2:0),C=2;C<L;C++)z[C-2]=arguments[C];console[m](`[${r}]  ${p.name}:`,...z)};class T{constructor(p){this.name=p,this._logLevel=C,this._logHandler=O,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(p){if(!(p in L))throw new TypeError(`Invalid value "${p}" assigned to \`logLevel\``);this._logLevel=p}setLogLevel(p){this._logLevel="string"===typeof p?z[p]:p}get logHandler(){return this._logHandler}set logHandler(p){if("function"!==typeof p)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=p}get userLogHandler(){return this._userLogHandler}set userLogHandler(p){this._userLogHandler=p}debug(){for(var p=arguments.length,h=new Array(p),r=0;r<p;r++)h[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...h),this._logHandler(this,L.DEBUG,...h)}log(){for(var p=arguments.length,h=new Array(p),r=0;r<p;r++)h[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...h),this._logHandler(this,L.VERBOSE,...h)}info(){for(var p=arguments.length,h=new Array(p),r=0;r<p;r++)h[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,L.INFO,...h),this._logHandler(this,L.INFO,...h)}warn(){for(var p=arguments.length,h=new Array(p),r=0;r<p;r++)h[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,L.WARN,...h),this._logHandler(this,L.WARN,...h)}error(){for(var p=arguments.length,h=new Array(p),r=0;r<p;r++)h[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,L.ERROR,...h),this._logHandler(this,L.ERROR,...h)}}},3925:(p,h,r)=>{r.d(h,{e:()=>up,i:()=>gp});var m=r(3899),L=r(3923),z=r(3916),C=r(3908);let v,O;const T=new WeakMap,x=new WeakMap,s=new WeakMap,P=new WeakMap,G=new WeakMap;let k={get(p,h,r){if(p instanceof IDBTransaction){if("done"===h)return x.get(p);if("objectStoreNames"===h)return p.objectStoreNames||s.get(p);if("store"===h)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return I(p[h])},set:(p,h,r)=>(p[h]=r,!0),has:(p,h)=>p instanceof IDBTransaction&&("done"===h||"store"===h)||h in p};function M(p){return p!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(O||(O=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(p)?function(){for(var h=arguments.length,r=new Array(h),m=0;m<h;m++)r[m]=arguments[m];return p.apply(U(this),r),I(T.get(this))}:function(){for(var h=arguments.length,r=new Array(h),m=0;m<h;m++)r[m]=arguments[m];return I(p.apply(U(this),r))}:function(h){for(var r=arguments.length,m=new Array(r>1?r-1:0),L=1;L<r;L++)m[L-1]=arguments[L];const z=p.call(U(this),h,...m);return s.set(z,h.sort?h.sort():[h]),I(z)}}function H(p){return"function"===typeof p?M(p):(p instanceof IDBTransaction&&function(p){if(x.has(p))return;const h=new Promise(((h,r)=>{const m=()=>{p.removeEventListener("complete",L),p.removeEventListener("error",z),p.removeEventListener("abort",z)},L=()=>{h(),m()},z=()=>{r(p.error||new DOMException("AbortError","AbortError")),m()};p.addEventListener("complete",L),p.addEventListener("error",z),p.addEventListener("abort",z)}));x.set(p,h)}(p),h=p,(v||(v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((p=>h instanceof p))?new Proxy(p,k):p);var h}function I(p){if(p instanceof IDBRequest)return function(p){const h=new Promise(((h,r)=>{const m=()=>{p.removeEventListener("success",L),p.removeEventListener("error",z)},L=()=>{h(I(p.result)),m()},z=()=>{r(p.error),m()};p.addEventListener("success",L),p.addEventListener("error",z)}));return h.then((h=>{h instanceof IDBCursor&&T.set(h,p)})).catch((()=>{})),G.set(h,p),h}(p);if(P.has(p))return P.get(p);const h=H(p);return h!==p&&(P.set(p,h),G.set(h,p)),h}const U=p=>G.get(p);const E=["get","getKey","getAll","getAllKeys","count"],j=["put","add","delete","clear"],c=new Map;function W(p,h){if(!(p instanceof IDBDatabase)||h in p||"string"!==typeof h)return;if(c.get(h))return c.get(h);const r=h.replace(/FromIndex$/,""),m=h!==r,L=j.includes(r);if(!(r in(m?IDBIndex:IDBObjectStore).prototype)||!L&&!E.includes(r))return;const z=async function(p){const h=this.transaction(p,L?"readwrite":"readonly");let z=h.store;for(var C=arguments.length,v=new Array(C>1?C-1:0),O=1;O<C;O++)v[O-1]=arguments[O];return m&&(z=z.index(v.shift())),(await Promise.all([z[r](...v),L&&h.done]))[0]};return c.set(h,z),z}k=(p=>({...p,get:(h,r,m)=>W(h,r)||p.get(h,r,m),has:(h,r)=>!!W(h,r)||p.has(h,r)}))(k);const K="@firebase/installations",A="0.6.4",X=1e4,t=`w:${A}`,f="FIS_v2",Z=36e5,N={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},i=new z.e("installations","Installations",N);function w(p){return p instanceof z.h&&p.code.includes("request-failed")}function S(p){let{projectId:h}=p;return`https://firebaseinstallations.googleapis.com/v1/projects/${h}/installations`}function Q(p){return{token:p.token,requestStatus:2,expiresIn:(h=p.expiresIn,Number(h.replace("s","000"))),creationTime:Date.now()};var h}async function J(p,h){const r=(await h.json()).error;return i.create("request-failed",{requestName:p,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function o(p){let{apiKey:h}=p;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":h})}function d(p,h){let{refreshToken:r}=h;const m=o(p);return m.append("Authorization",function(p){return`${f} ${p}`}(r)),m}async function e(p){const h=await p();return h.status>=500&&h.status<600?p():h}function F(p){return new Promise((h=>{setTimeout(h,p)}))}const y=/^[cdef][\w-]{21}$/;function V(){try{const p=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(p),p[0]=112+p[0]%16;const h=function(p){const h=(r=p,btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_"));var r;return h.substr(0,22)}(p);return y.test(h)?h:""}catch(p){return""}}function n(p){return`${p.appName}!${p.appId}`}const a=new Map;function B(p,h){const r=n(p);u(r,h),function(p,h){const r=q();r&&r.postMessage({key:p,fid:h});R()}(r,h)}function u(p,h){const r=a.get(p);if(r)for(const p of r)p(h)}let g=null;function q(){return!g&&"BroadcastChannel"in self&&(g=new BroadcastChannel("[Firebase] FID Change"),g.onmessage=p=>{u(p.data.key,p.data.fid)}),g}function R(){0===a.size&&g&&(g.close(),g=null)}const l="firebase-installations-store";let Y=null;function D(){return Y||(Y=function(p,h){let{blocked:r,upgrade:m,blocking:L,terminated:z}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const C=indexedDB.open(p,h),v=I(C);return m&&C.addEventListener("upgradeneeded",(p=>{m(I(C.result),p.oldVersion,p.newVersion,I(C.transaction))})),r&&C.addEventListener("blocked",(()=>r())),v.then((p=>{z&&p.addEventListener("close",(()=>z())),L&&p.addEventListener("versionchange",(()=>L()))})).catch((()=>{})),v}("firebase-installations-database",1,{upgrade:(p,h)=>{if(0===h)p.createObjectStore(l)}})),Y}async function b(p,h){const r=n(p),m=(await D()).transaction(l,"readwrite"),L=m.objectStore(l),z=await L.get(r);return await L.put(h,r),await m.done,z&&z.fid===h.fid||B(p,h.fid),h}async function pp(p){const h=n(p),r=(await D()).transaction(l,"readwrite");await r.objectStore(l).delete(h),await r.done}async function hp(p,h){const r=n(p),m=(await D()).transaction(l,"readwrite"),L=m.objectStore(l),z=await L.get(r),C=h(z);return void 0===C?await L.delete(r):await L.put(C,r),await m.done,!C||z&&z.fid===C.fid||B(p,C.fid),C}async function rp(p){let h;const r=await hp(p.appConfig,(r=>{const m=function(p){const h=p||{fid:V(),registrationStatus:0};return zp(h)}(r),L=function(p,h){if(0===h.registrationStatus){if(!navigator.onLine){return{installationEntry:h,registrationPromise:Promise.reject(i.create("app-offline"))}}const r={fid:h.fid,registrationStatus:1,registrationTime:Date.now()},m=async function(p,h){try{const r=await async function(p,h){let{appConfig:r,heartbeatServiceProvider:m}=p,{fid:L}=h;const z=S(r),C=o(r),v=m.getImmediate({optional:!0});if(v){const p=await v.getHeartbeatsHeader();p&&C.append("x-firebase-client",p)}const O={fid:L,authVersion:f,appId:r.appId,sdkVersion:t},T={method:"POST",headers:C,body:JSON.stringify(O)},x=await e((()=>fetch(z,T)));if(x.ok){const p=await x.json();return{fid:p.fid||L,registrationStatus:2,refreshToken:p.refreshToken,authToken:Q(p.authToken)}}throw await J("Create Installation",x)}(p,h);return b(p.appConfig,r)}catch(r){throw w(r)&&409===r.customData.serverCode?await pp(p.appConfig):await b(p.appConfig,{fid:h.fid,registrationStatus:0}),r}}(p,r);return{installationEntry:r,registrationPromise:m}}return 1===h.registrationStatus?{installationEntry:h,registrationPromise:mp(p)}:{installationEntry:h}}(p,m);return h=L.registrationPromise,L.installationEntry}));return""===r.fid?{installationEntry:await h}:{installationEntry:r,registrationPromise:h}}async function mp(p){let h=await Lp(p.appConfig);for(;1===h.registrationStatus;)await F(100),h=await Lp(p.appConfig);if(0===h.registrationStatus){const{installationEntry:h,registrationPromise:r}=await rp(p);return r||h}return h}function Lp(p){return hp(p,(p=>{if(!p)throw i.create("installation-not-found");return zp(p)}))}function zp(p){return 1===(h=p).registrationStatus&&h.registrationTime+X<Date.now()?{fid:p.fid,registrationStatus:0}:p;var h}async function Cp(p,h){let{appConfig:r,heartbeatServiceProvider:m}=p;const L=function(p,h){let{fid:r}=h;return`${S(p)}/${r}/authTokens:generate`}(r,h),z=d(r,h),C=m.getImmediate({optional:!0});if(C){const p=await C.getHeartbeatsHeader();p&&z.append("x-firebase-client",p)}const v={installation:{sdkVersion:t,appId:r.appId}},O={method:"POST",headers:z,body:JSON.stringify(v)},T=await e((()=>fetch(L,O)));if(T.ok){return Q(await T.json())}throw await J("Generate Auth Token",T)}async function vp(p){let h,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const m=await hp(p.appConfig,(m=>{if(!Tp(m))throw i.create("not-registered");const L=m.authToken;if(!r&&function(p){return 2===p.requestStatus&&!function(p){const h=Date.now();return h<p.creationTime||p.creationTime+p.expiresIn<h+Z}(p)}(L))return m;if(1===L.requestStatus)return h=async function(p,h){let r=await Op(p.appConfig);for(;1===r.authToken.requestStatus;)await F(100),r=await Op(p.appConfig);const m=r.authToken;return 0===m.requestStatus?vp(p,h):m}(p,r),m;{if(!navigator.onLine)throw i.create("app-offline");const r=function(p){const h={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},p),{authToken:h})}(m);return h=async function(p,h){try{const r=await Cp(p,h),m=Object.assign(Object.assign({},h),{authToken:r});return await b(p.appConfig,m),r}catch(r){if(!w(r)||401!==r.customData.serverCode&&404!==r.customData.serverCode){const r=Object.assign(Object.assign({},h),{authToken:{requestStatus:0}});await b(p.appConfig,r)}else await pp(p.appConfig);throw r}}(p,r),r}}));return h?await h:m.authToken}function Op(p){return hp(p,(p=>{if(!Tp(p))throw i.create("not-registered");const h=p.authToken;return 1===(r=h).requestStatus&&r.requestTime+X<Date.now()?Object.assign(Object.assign({},p),{authToken:{requestStatus:0}}):p;var r}))}function Tp(p){return void 0!==p&&2===p.registrationStatus}async function xp(p){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=p;await async function(p){const{registrationPromise:h}=await rp(p);h&&await h}(r);return(await vp(r,h)).token}function sp(p){return i.create("missing-app-config-values",{valueName:p})}const Pp="installations",Gp=p=>{const h=p.getProvider("app").getImmediate(),r=function(p){if(!p||!p.options)throw sp("App Configuration");if(!p.name)throw sp("App Name");const h=["projectId","apiKey","appId"];for(const r of h)if(!p.options[r])throw sp(r);return{appName:p.name,projectId:p.options.projectId,apiKey:p.options.apiKey,appId:p.options.appId}}(h);return{app:h,appConfig:r,heartbeatServiceProvider:(0,m.f)(h,"heartbeat"),_delete:()=>Promise.resolve()}},kp=p=>{const h=p.getProvider("app").getImmediate(),r=(0,m.f)(h,Pp).getImmediate();return{getId:()=>async function(p){const h=p,{installationEntry:r,registrationPromise:m}=await rp(h);return m?m.catch(console.error):vp(h).catch(console.error),r.fid}(r),getToken:p=>xp(r,p)}};(0,m.g)(new C.g(Pp,Gp,"PUBLIC")),(0,m.g)(new C.g("installations-internal",kp,"PRIVATE")),(0,m.m)(K,A),(0,m.m)(K,A,"esm2017");const Mp="analytics",Hp="https://www.googletagmanager.com/gtag/js",Ip=new L.g("@firebase/analytics"),Up={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ep=new z.e("analytics","Analytics",Up);function jp(p){if(!p.startsWith(Hp)){const h=Ep.create("invalid-gtag-resource",{gtagURL:p});return Ip.warn(h.message),""}return p}function cp(p){return Promise.all(p.map((p=>p.catch((p=>p)))))}function Wp(p,h){const r=function(p,h){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(p,h)),r}("firebase-js-sdk-policy",{createScriptURL:jp}),m=document.createElement("script"),L=`${Hp}?l=${p}&id=${h}`;m.src=r?null===r||void 0===r?void 0:r.createScriptURL(L):L,m.async=!0,document.head.appendChild(m)}function Kp(p,h,r,m){return async function(L){try{for(var z=arguments.length,C=new Array(z>1?z-1:0),v=1;v<z;v++)C[v-1]=arguments[v];if("event"===L){const[m,L]=C;await async function(p,h,r,m,L){try{let z=[];if(L&&L.send_to){let p=L.send_to;Array.isArray(p)||(p=[p]);const m=await cp(r);for(const r of p){const p=m.find((p=>p.measurementId===r)),L=p&&h[p.appId];if(!L){z=[];break}z.push(L)}}0===z.length&&(z=Object.values(h)),await Promise.all(z),p("event",m,L||{})}catch(p){Ip.error(p)}}(p,h,r,m,L)}else if("config"===L){const[L,z]=C;await async function(p,h,r,m,L,z){const C=m[L];try{if(C)await h[C];else{const p=(await cp(r)).find((p=>p.measurementId===L));p&&await h[p.appId]}}catch(p){Ip.error(p)}p("config",L,z)}(p,h,r,m,L,z)}else if("consent"===L){const[h]=C;p("consent","update",h)}else if("get"===L){const[h,r,m]=C;p("get",h,r,m)}else if("set"===L){const[h]=C;p("set",h)}else p(L,...C)}catch(p){Ip.error(p)}}}const Ap=new class{constructor(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=p,this.intervalMillis=h}getThrottleMetadata(p){return this.throttleMetadata[p]}setThrottleMetadata(p,h){this.throttleMetadata[p]=h}deleteThrottleMetadata(p){delete this.throttleMetadata[p]}};function Xp(p){return new Headers({Accept:"application/json","x-goog-api-key":p})}async function tp(p){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ap,r=arguments.length>2?arguments[2]:void 0;const{appId:m,apiKey:L,measurementId:z}=p.options;if(!m)throw Ep.create("no-app-id");if(!L){if(z)return{measurementId:z,appId:m};throw Ep.create("no-api-key")}const C=h.getThrottleMetadata(m)||{backoffCount:0,throttleEndTimeMillis:Date.now()},v=new Zp;return setTimeout((async()=>{v.abort()}),void 0!==r?r:6e4),fp({appId:m,apiKey:L,measurementId:z},C,v,h)}async function fp(p,h,r){let{throttleEndTimeMillis:m,backoffCount:L}=h,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ap;var v;const{appId:O,measurementId:T}=p;try{await function(p,h){return new Promise(((r,m)=>{const L=Math.max(h-Date.now(),0),z=setTimeout(r,L);p.addEventListener((()=>{clearTimeout(z),m(Ep.create("fetch-throttle",{throttleEndTimeMillis:h}))}))}))}(r,m)}catch(p){if(T)return Ip.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${T} provided in the "measurementId" field in the local Firebase config. [${null===p||void 0===p?void 0:p.message}]`),{appId:O,measurementId:T};throw p}try{const h=await async function(p){var h;const{appId:r,apiKey:m}=p,L={method:"GET",headers:Xp(m)},z="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",r),C=await fetch(z,L);if(200!==C.status&&304!==C.status){let p="";try{const r=await C.json();(null===(h=r.error)||void 0===h?void 0:h.message)&&(p=r.error.message)}catch(p){}throw Ep.create("config-fetch-failed",{httpStatus:C.status,responseMessage:p})}return C.json()}(p);return C.deleteThrottleMetadata(O),h}catch(h){const m=h;if(!function(p){if(!(p instanceof z.h)||!p.customData)return!1;const h=Number(p.customData.httpStatus);return 429===h||500===h||503===h||504===h}(m)){if(C.deleteThrottleMetadata(O),T)return Ip.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${T} provided in the "measurementId" field in the local Firebase config. [${null===m||void 0===m?void 0:m.message}]`),{appId:O,measurementId:T};throw h}const x=503===Number(null===(v=null===m||void 0===m?void 0:m.customData)||void 0===v?void 0:v.httpStatus)?(0,z.t)(L,C.intervalMillis,30):(0,z.t)(L,C.intervalMillis),s={throttleEndTimeMillis:Date.now()+x,backoffCount:L+1};return C.setThrottleMetadata(O,s),Ip.debug(`Calling attemptFetch again in ${x} millis`),fp(p,s,r,C)}}class Zp{constructor(){this.listeners=[]}addEventListener(p){this.listeners.push(p)}abort(){this.listeners.forEach((p=>p()))}}let Np,ip;function wp(p){ip=p}function Sp(p){Np=p}async function Qp(p,h,r,m,L,C,v){var O;const T=tp(p);T.then((h=>{r[h.measurementId]=h.appId,p.options.measurementId&&h.measurementId!==p.options.measurementId&&Ip.warn(`The measurement ID in the local Firebase config (${p.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((p=>Ip.error(p))),h.push(T);const x=async function(){if(!(0,z.Y)())return Ip.warn(Ep.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,z.hb)()}catch(p){return Ip.warn(Ep.create("indexeddb-unavailable",{errorInfo:null===p||void 0===p?void 0:p.toString()}).message),!1}return!0}().then((p=>p?m.getId():void 0)),[s,P]=await Promise.all([T,x]);(function(p){const h=window.document.getElementsByTagName("script");for(const r of Object.values(h))if(r.src&&r.src.includes(Hp)&&r.src.includes(p))return r;return null})(C)||Wp(C,s.measurementId),ip&&(L("consent","default",ip),wp(void 0)),L("js",new Date);const G=null!==(O=null===v||void 0===v?void 0:v.config)&&void 0!==O?O:{};return G.origin="firebase",G.update=!0,null!=P&&(G.firebase_id=P),L("config",s.measurementId,G),Np&&(L("set",Np),Sp(void 0)),s.measurementId}class Jp{constructor(p){this.app=p}_delete(){return delete op[this.app.options.appId],Promise.resolve()}}let op={},dp=[];const ep={};let Fp,yp,Vp="dataLayer",np="gtag",ap=!1;function Bp(p,h,r){!function(){const p=[];if((0,z.R)()&&p.push("This is a browser extension environment."),(0,z.j)()||p.push("Cookies are not available."),p.length>0){const h=p.map(((p,h)=>`(${h+1}) ${p}`)).join(" "),r=Ep.create("invalid-analytics-context",{errorInfo:h});Ip.warn(r.message)}}();const m=p.options.appId;if(!m)throw Ep.create("no-app-id");if(!p.options.apiKey){if(!p.options.measurementId)throw Ep.create("no-api-key");Ip.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${p.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=op[m])throw Ep.create("already-exists",{id:m});if(!ap){!function(p){let h=[];Array.isArray(window[p])?h=window[p]:window[p]=h}(Vp);const{wrappedGtag:p,gtagCore:h}=function(p,h,r,m,L){let z=function(){for(var p=arguments.length,h=new Array(p),r=0;r<p;r++)h[r]=arguments[r];window[m].push(arguments)};return window[L]&&"function"===typeof window[L]&&(z=window[L]),window[L]=Kp(z,p,h,r),{gtagCore:z,wrappedGtag:window[L]}}(op,dp,ep,Vp,np);yp=p,Fp=h,ap=!0}op[m]=Qp(p,dp,ep,h,Fp,Vp,r);return new Jp(p)}function up(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.j)();p=(0,z.L)(p);const h=(0,m.f)(p,Mp);return h.isInitialized()?h.getImmediate():function(p){let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(0,m.f)(p,Mp);if(r.isInitialized()){const p=r.getImmediate();if((0,z.w)(h,r.getOptions()))return p;throw Ep.create("already-initialized")}const L=r.initialize({options:h});return L}(p)}function gp(p,h,r){p=(0,z.L)(p),async function(p,h,r,m){if(m&&m.global){const h={};for(const p of Object.keys(r))h[`user_properties.${p}`]=r[p];return p("set",h),Promise.resolve()}p("config",await h,{update:!0,user_properties:r})}(yp,op[p.app.options.appId],h,r).catch((p=>Ip.error(p)))}function qp(p,h,r,m){p=(0,z.L)(p),async function(p,h,r,m,L){if(L&&L.global)p("event",r,m);else{const L=await h;p("event",r,Object.assign(Object.assign({},m),{send_to:L}))}}(yp,op[p.app.options.appId],h,r,m).catch((p=>Ip.error(p)))}const Rp="@firebase/analytics",lp="0.10.0";(0,m.g)(new C.g(Mp,((p,h)=>{let{options:r}=h;return Bp(p.getProvider("app").getImmediate(),p.getProvider("installations-internal").getImmediate(),r)}),"PUBLIC")),(0,m.g)(new C.g("analytics-internal",(function(p){try{const h=p.getProvider(Mp).getImmediate();return{logEvent:(p,r,m)=>qp(h,p,r,m)}}catch(p){throw Ep.create("interop-component-reg-failed",{reason:p})}}),"PRIVATE")),(0,m.m)(Rp,lp),(0,m.m)(Rp,lp,"esm2017")},3896:(p,h,r)=>{r.d(h,{d:()=>m.k});var m=r(3899);(0,m.m)("firebase","9.23.0","app")},3927:(p,h,r)=>{r.d(h,{e:()=>Fp,f:()=>Hr,h:()=>lp,k:()=>ih,l:()=>Dp,p:()=>Yp});var m=r(3916),L=r(3899);function z(p,h){var r={};for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&h.indexOf(m)<0&&(r[m]=p[m]);if(null!=p&&"function"===typeof Object.getOwnPropertySymbols){var L=0;for(m=Object.getOwnPropertySymbols(p);L<m.length;L++)h.indexOf(m[L])<0&&Object.prototype.propertyIsEnumerable.call(p,m[L])&&(r[m[L]]=p[m[L]])}return r}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var C=r(3923),v=r(3908);function O(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const T=O,x=new m.e("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),s=new C.g("@firebase/auth");function P(p){if(s.logLevel<=C.e.ERROR){for(var h=arguments.length,r=new Array(h>1?h-1:0),m=1;m<h;m++)r[m-1]=arguments[m];s.error(`Auth (${L.d}): ${p}`,...r)}}function G(p){for(var h=arguments.length,r=new Array(h>1?h-1:0),m=1;m<h;m++)r[m-1]=arguments[m];throw I(p,...r)}function k(p){for(var h=arguments.length,r=new Array(h>1?h-1:0),m=1;m<h;m++)r[m-1]=arguments[m];return I(p,...r)}function M(p,h,r){const L=Object.assign(Object.assign({},T()),{[h]:r});return new m.e("auth","Firebase",L).create(h,{appName:p.name})}function H(p,h,r){if(!(h instanceof r))throw r.name!==h.constructor.name&&G(p,"argument-error"),M(p,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function I(p){for(var h=arguments.length,r=new Array(h>1?h-1:0),m=1;m<h;m++)r[m-1]=arguments[m];if("string"!==typeof p){const h=r[0],m=[...r.slice(1)];return m[0]&&(m[0].appName=p.name),p._errorFactory.create(h,...m)}return x.create(p,...r)}function U(p,h){if(!p){for(var r=arguments.length,m=new Array(r>2?r-2:0),L=2;L<r;L++)m[L-2]=arguments[L];throw I(h,...m)}}function E(p){const h="INTERNAL ASSERTION FAILED: "+p;throw P(h),new Error(h)}function j(p,h){p||E(h)}function c(){var p;return"undefined"!==typeof self&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function W(){return"http:"===K()||"https:"===K()}function K(){var p;return"undefined"!==typeof self&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class A{constructor(p,h){this.shortDelay=p,this.longDelay=h,j(h>p,"Short delay should be less than long delay!"),this.isMobile=(0,m.$)()||(0,m.bb)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(W()||(0,m.R)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function X(p,h){j(p.emulator,"Emulator should always be set here");const{url:r}=p.emulator;return h?`${r}${h.startsWith("/")?h.slice(1):h}`:r}class t{static initialize(p,h,r){this.fetchImpl=p,h&&(this.headersImpl=h),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void E("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void E("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void E("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const f={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Z=new A(3e4,6e4);function N(p,h){return p.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:p.tenantId}):h}async function i(p,h,r,L){return w(p,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let z={},C={};L&&("GET"===h?C=L:z={body:JSON.stringify(L)});const v=(0,m.eb)(Object.assign({key:p.config.apiKey},C)).slice(1),O=await p._getAdditionalHeaders();return O["Content-Type"]="application/json",p.languageCode&&(O["X-Firebase-Locale"]=p.languageCode),t.fetch()(Q(p,p.config.apiHost,r,v),Object.assign({method:h,headers:O,referrerPolicy:"no-referrer"},z))}))}async function w(p,h,r){p._canInitEmulator=!1;const L=Object.assign(Object.assign({},f),h);try{const h=new J(p),m=await Promise.race([r(),h.promise]);h.clearNetworkTimeout();const z=await m.json();if("needConfirmation"in z)throw o(p,"account-exists-with-different-credential",z);if(m.ok&&!("errorMessage"in z))return z;{const h=m.ok?z.errorMessage:z.error.message,[r,C]=h.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===r)throw o(p,"credential-already-in-use",z);if("EMAIL_EXISTS"===r)throw o(p,"email-already-in-use",z);if("USER_DISABLED"===r)throw o(p,"user-disabled",z);const v=L[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(C)throw M(p,v,C);G(p,v)}}catch(h){if(h instanceof m.h)throw h;G(p,"network-request-failed",{message:String(h)})}}async function S(p,h,r,m){let L=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const z=await i(p,h,r,m,L);return"mfaPendingCredential"in z&&G(p,"multi-factor-auth-required",{_serverResponse:z}),z}function Q(p,h,r,m){const L=`${h}${r}?${m}`;return p.config.emulator?X(p.config,L):`${p.config.apiScheme}://${L}`}class J{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise(((p,h)=>{this.timer=setTimeout((()=>h(k(this.auth,"network-request-failed"))),Z.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function o(p,h,r){const m={appName:p.name};r.email&&(m.email=r.email),r.phoneNumber&&(m.phoneNumber=r.phoneNumber);const L=k(p,h,m);return L.customData._tokenResponse=r,L}function d(p){if(p)try{const h=new Date(Number(p));if(!isNaN(h.getTime()))return h.toUTCString()}catch(p){}}function e(p){return 1e3*Number(p)}function F(p){const[h,r,L]=p.split(".");if(void 0===h||void 0===r||void 0===L)return P("JWT malformed, contained fewer than 3 sections"),null;try{const p=(0,m.l)(r);return p?JSON.parse(p):(P("Failed to decode base64 JWT payload"),null)}catch(p){return P("Caught error parsing JWT payload as JSON",null===p||void 0===p?void 0:p.toString()),null}}async function y(p,h){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return h;try{return await h}catch(h){throw h instanceof m.h&&function(p){let{code:h}=p;return"auth/user-disabled"===h||"auth/user-token-expired"===h}(h)&&p.auth.currentUser===p&&await p.auth.signOut(),h}}class V{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var h;if(p){const p=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),p}{this.errorBackoff=3e4;const p=(null!==(h=this.user.stsTokenManager.expirationTime)&&void 0!==h?h:0)-Date.now()-3e5;return Math.max(0,p)}}schedule(){let p=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const h=this.getInterval(p);this.timerId=setTimeout((async()=>{await this.iteration()}),h)}async iteration(){try{await this.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===(null===p||void 0===p?void 0:p.code)&&this.schedule(!0))}this.schedule()}}class n{constructor(p,h){this.createdAt=p,this.lastLoginAt=h,this._initializeTime()}_initializeTime(){this.lastSignInTime=d(this.lastLoginAt),this.creationTime=d(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function a(p){var h;const r=p.auth,m=await p.getIdToken(),L=await y(p,async function(p,h){return i(p,"POST","/v1/accounts:lookup",h)}(r,{idToken:m}));U(null===L||void 0===L?void 0:L.users.length,r,"internal-error");const C=L.users[0];p._notifyReloadListener(C);const v=(null===(h=C.providerUserInfo)||void 0===h?void 0:h.length)?C.providerUserInfo.map((p=>{var{providerId:h}=p,r=z(p,["providerId"]);return{providerId:h,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})):[];const O=(T=p.providerData,x=v,[...T.filter((p=>!x.some((h=>h.providerId===p.providerId)))),...x]);var T,x;const s=p.isAnonymous,P=!(p.email&&C.passwordHash)&&!(null===O||void 0===O?void 0:O.length),G=!!s&&P,k={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:O,metadata:new n(C.createdAt,C.lastLoginAt),isAnonymous:G};Object.assign(p,k)}class B{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){U(p.idToken,"internal-error"),U("undefined"!==typeof p.idToken,"internal-error"),U("undefined"!==typeof p.refreshToken,"internal-error");const h="expiresIn"in p&&"undefined"!==typeof p.expiresIn?Number(p.expiresIn):function(p){const h=F(p);return U(h,"internal-error"),U("undefined"!==typeof h.exp,"internal-error"),U("undefined"!==typeof h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,h)}async getToken(p){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return U(!this.accessToken||this.refreshToken,p,"user-token-expired"),h||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(p,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(p,h){const{accessToken:r,refreshToken:L,expiresIn:z}=await async function(p,h){const r=await w(p,{},(async()=>{const r=(0,m.eb)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:L,apiKey:z}=p.config,C=Q(p,L,"/v1/token",`key=${z}`),v=await p._getAdditionalHeaders();return v["Content-Type"]="application/x-www-form-urlencoded",t.fetch()(C,{method:"POST",headers:v,body:r})}));return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}(p,h);this.updateTokensAndExpiration(r,L,Number(z))}updateTokensAndExpiration(p,h,r){this.refreshToken=h||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(p,h){const{refreshToken:r,accessToken:m,expirationTime:L}=h,z=new B;return r&&(U("string"===typeof r,"internal-error",{appName:p}),z.refreshToken=r),m&&(U("string"===typeof m,"internal-error",{appName:p}),z.accessToken=m),L&&(U("number"===typeof L,"internal-error",{appName:p}),z.expirationTime=L),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new B,this.toJSON())}_performRefresh(){return E("not implemented")}}function u(p,h){U("string"===typeof p||"undefined"===typeof p,"internal-error",{appName:h})}class g{constructor(p){var{uid:h,auth:r,stsTokenManager:m}=p,L=z(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new V(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=h,this.auth=r,this.stsTokenManager=m,this.accessToken=m.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new n(L.createdAt||void 0,L.lastLoginAt||void 0)}async getIdToken(p){const h=await y(this,this.stsTokenManager.getToken(this.auth,p));return U(h,this.auth,"internal-error"),this.accessToken!==h&&(this.accessToken=h,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),h}getIdTokenResult(p){return async function(p){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=(0,m.L)(p),L=await r.getIdToken(h),z=F(L);U(z&&z.exp&&z.auth_time&&z.iat,r.auth,"internal-error");const C="object"===typeof z.firebase?z.firebase:void 0,v=null===C||void 0===C?void 0:C.sign_in_provider;return{claims:z,token:L,authTime:d(e(z.auth_time)),issuedAtTime:d(e(z.iat)),expirationTime:d(e(z.exp)),signInProvider:v||null,signInSecondFactor:(null===C||void 0===C?void 0:C.sign_in_second_factor)||null}}(this,p)}reload(){return async function(p){const h=(0,m.L)(p);await a(h),await h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)}(this)}_assign(p){this!==p&&(U(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map((p=>Object.assign({},p))),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const h=new g(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return h.metadata._copy(this.metadata),h}_onReload(p){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(p){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!1;p.idToken&&p.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(p),r=!0),h&&await a(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const p=await this.getIdToken();return await y(this,async function(p,h){return i(p,"POST","/v1/accounts:delete",h)}(this.auth,{idToken:p})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((p=>Object.assign({},p))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,h){var r,m,L,z,C,v,O,T;const x=null!==(r=h.displayName)&&void 0!==r?r:void 0,s=null!==(m=h.email)&&void 0!==m?m:void 0,P=null!==(L=h.phoneNumber)&&void 0!==L?L:void 0,G=null!==(z=h.photoURL)&&void 0!==z?z:void 0,k=null!==(C=h.tenantId)&&void 0!==C?C:void 0,M=null!==(v=h._redirectEventId)&&void 0!==v?v:void 0,H=null!==(O=h.createdAt)&&void 0!==O?O:void 0,I=null!==(T=h.lastLoginAt)&&void 0!==T?T:void 0,{uid:E,emailVerified:j,isAnonymous:c,providerData:W,stsTokenManager:K}=h;U(E&&K,p,"internal-error");const A=B.fromJSON(this.name,K);U("string"===typeof E,p,"internal-error"),u(x,p.name),u(s,p.name),U("boolean"===typeof j,p,"internal-error"),U("boolean"===typeof c,p,"internal-error"),u(P,p.name),u(G,p.name),u(k,p.name),u(M,p.name),u(H,p.name),u(I,p.name);const X=new g({uid:E,auth:p,email:s,emailVerified:j,displayName:x,isAnonymous:c,photoURL:G,phoneNumber:P,tenantId:k,stsTokenManager:A,createdAt:H,lastLoginAt:I});return W&&Array.isArray(W)&&(X.providerData=W.map((p=>Object.assign({},p)))),M&&(X._redirectEventId=M),X}static async _fromIdTokenResponse(p,h){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const m=new B;m.updateFromServerResponse(h);const L=new g({uid:h.localId,auth:p,stsTokenManager:m,isAnonymous:r});return await a(L),L}}const q=new Map;function R(p){j(p instanceof Function,"Expected a class definition");let h=q.get(p);return h?(j(h instanceof p,"Instance stored in cache mismatched with class"),h):(h=new p,q.set(p,h),h)}class l{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(p,h){this.storage[p]=h}async _get(p){const h=this.storage[p];return void 0===h?null:h}async _remove(p){delete this.storage[p]}_addListener(p,h){}_removeListener(p,h){}}l.type="NONE";const Y=l;function D(p,h,r){return`firebase:${p}:${h}:${r}`}class b{constructor(p,h,r){this.persistence=p,this.auth=h,this.userKey=r;const{config:m,name:L}=this.auth;this.fullUserKey=D(this.userKey,m.apiKey,L),this.fullPersistenceKey=D("persistence",m.apiKey,L),this.boundEventHandler=h._onStorageEvent.bind(h),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}async getCurrentUser(){const p=await this.persistence._get(this.fullUserKey);return p?g._fromJSON(this.auth,p):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(p){if(this.persistence===p)return;const h=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=p,h?this.setCurrentUser(h):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(p,h){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!h.length)return new b(R(Y),p,r);const m=(await Promise.all(h.map((async p=>{if(await p._isAvailable())return p})))).filter((p=>p));let L=m[0]||R(Y);const z=D(r,p.config.apiKey,p.name);let C=null;for(const r of h)try{const h=await r._get(z);if(h){const m=g._fromJSON(p,h);r!==L&&(C=m),L=r;break}}catch(p){}const v=m.filter((p=>p._shouldAllowMigration));return L._shouldAllowMigration&&v.length?(L=v[0],C&&await L._set(z,C.toJSON()),await Promise.all(h.map((async p=>{if(p!==L)try{await p._remove(z)}catch(p){}}))),new b(L,p,r)):new b(L,p,r)}}function pp(p){const h=p.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Lp(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(hp(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Cp(h))return"Blackberry";if(vp(h))return"Webos";if(rp(h))return"Safari";if((h.includes("chrome/")||mp(h))&&!h.includes("edge/"))return"Chrome";if(zp(h))return"Android";{const h=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=p.match(h);if(2===(null===r||void 0===r?void 0:r.length))return r[1]}return"Other"}function hp(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.O)();return/firefox\//i.test(p)}function rp(){const p=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.O)()).toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function mp(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.O)();return/crios\//i.test(p)}function Lp(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.O)();return/iemobile/i.test(p)}function zp(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.O)();return/android/i.test(p)}function Cp(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.O)();return/blackberry/i.test(p)}function vp(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.O)();return/webos/i.test(p)}function Op(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.O)();return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function Tp(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.O)();return Op(p)||zp(p)||vp(p)||Cp(p)||/windows phone/i.test(p)||Lp(p)}function xp(p){let h,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(p){case"Browser":h=pp((0,m.O)());break;case"Worker":h=`${pp((0,m.O)())}-${p}`;break;default:h=p}const z=r.length?r.join(","):"FirebaseCore-web";return`${h}/JsCore/${L.d}/${z}`}async function sp(p,h){return i(p,"GET","/v2/recaptchaConfig",N(p,h))}function Pp(p){return void 0!==p&&void 0!==p.enterprise}class Gp{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some((p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState))}}function kp(p){return new Promise(((h,r)=>{const m=document.createElement("script");m.setAttribute("src",p),m.onload=h,m.onerror=p=>{const h=k("internal-error");h.customData=p,r(h)},m.type="text/javascript",m.charset="UTF-8",function(){var p,h;return null!==(h=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==h?h:document}().appendChild(m)}))}function Mp(p){return`__${p}${Math.floor(1e6*Math.random())}`}class Hp{constructor(p){this.type="recaptcha-enterprise",this.auth=jp(p)}async verify(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(h,r,m){const L=window.grecaptcha;Pp(L)?L.enterprise.ready((()=>{L.enterprise.execute(h,{action:p}).then((p=>{r(p)})).catch((()=>{r("NO_RECAPTCHA")}))})):m(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((p,m)=>{(async function(p){if(!h){if(null==p.tenantId&&null!=p._agentRecaptchaConfig)return p._agentRecaptchaConfig.siteKey;if(null!=p.tenantId&&void 0!==p._tenantRecaptchaConfigs[p.tenantId])return p._tenantRecaptchaConfigs[p.tenantId].siteKey}return new Promise((async(h,r)=>{sp(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((m=>{if(void 0!==m.recaptchaKey){const r=new Gp(m);return null==p.tenantId?p._agentRecaptchaConfig=r:p._tenantRecaptchaConfigs[p.tenantId]=r,h(r.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((p=>{r(p)}))}))})(this.auth).then((L=>{if(!h&&Pp(window.grecaptcha))r(L,p,m);else{if("undefined"===typeof window)return void m(new Error("RecaptchaVerifier is only supported in browser"));kp("https://www.google.com/recaptcha/enterprise.js?render="+L).then((()=>{r(L,p,m)})).catch((p=>{m(p)}))}})).catch((p=>{m(p)}))}))}}async function Ip(p,h,r){let m=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const L=new Hp(p);let z;try{z=await L.verify(r)}catch(p){z=await L.verify(r,!0)}const C=Object.assign({},h);return m?Object.assign(C,{captchaResp:z}):Object.assign(C,{captchaResponse:z}),Object.assign(C,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(C,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),C}class Up{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,h){const r=h=>new Promise(((r,m)=>{try{r(p(h))}catch(p){m(p)}}));r.onAbort=h,this.queue.push(r);const m=this.queue.length-1;return()=>{this.queue[m]=()=>Promise.resolve()}}async runMiddleware(p){if(this.auth.currentUser===p)return;const h=[];try{for(const r of this.queue)await r(p),r.onAbort&&h.push(r.onAbort)}catch(p){h.reverse();for(const p of h)try{p()}catch(p){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===p||void 0===p?void 0:p.message})}}}class Ep{constructor(p,h,r,m){this.app=p,this.heartbeatServiceProvider=h,this.appCheckServiceProvider=r,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cp(this),this.idTokenSubscription=new cp(this),this.beforeStateQueue=new Up(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(p,h){return h&&(this._popupRedirectResolver=R(h)),this._initializationPromise=this.queue((async()=>{var r,m;if(!this._deleted&&(this.persistenceManager=await b.create(this,p),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(p){}await this.initializeCurrentUser(h),this.lastNotifiedUid=(null===(m=this.currentUser)||void 0===m?void 0:m.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const p=await this.assertedPersistence.getCurrentUser();return this.currentUser||p?this.currentUser&&p&&this.currentUser.uid===p.uid?(this._currentUser._assign(p),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(p,!0):void 0}async initializeCurrentUser(p){var h;const r=await this.assertedPersistence.getCurrentUser();let m=r,L=!1;if(p&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(h=this.redirectUser)||void 0===h?void 0:h._redirectEventId,z=null===m||void 0===m?void 0:m._redirectEventId,C=await this.tryRedirectSignIn(p);r&&r!==z||!(null===C||void 0===C?void 0:C.user)||(m=C.user,L=!0)}if(!m)return this.directlySetCurrentUser(null);if(!m._redirectEventId){if(L)try{await this.beforeStateQueue.runMiddleware(m)}catch(p){m=r,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(p)))}return m?this.reloadAndSetCurrentUserOrClear(m):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===m._redirectEventId?this.directlySetCurrentUser(m):this.reloadAndSetCurrentUserOrClear(m)}async tryRedirectSignIn(p){let h=null;try{h=await this._popupRedirectResolver._completeRedirectFn(this,p,!0)}catch(p){await this._setRedirectUser(null)}return h}async reloadAndSetCurrentUserOrClear(p){try{await a(p)}catch(p){if("auth/network-request-failed"!==(null===p||void 0===p?void 0:p.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(p)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(p){const h=p?(0,m.L)(p):null;return h&&U(h.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(h&&h._clone(this))}async _updateCurrentUser(p){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return p&&U(this.tenantId===p.tenantId,this,"tenant-id-mismatch"),h||await this.beforeStateQueue.runMiddleware(p),this.queue((async()=>{await this.directlySetCurrentUser(p),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(p){return this.queue((async()=>{await this.assertedPersistence.setPersistence(R(p))}))}async initializeRecaptchaConfig(){const p=await sp(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),h=new Gp(p);if(null==this.tenantId?this._agentRecaptchaConfig=h:this._tenantRecaptchaConfigs[this.tenantId]=h,h.emailPasswordEnabled){new Hp(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new m.e("auth","Firebase",p())}onAuthStateChanged(p,h,r){return this.registerStateListener(this.authStateSubscription,p,h,r)}beforeAuthStateChanged(p,h){return this.beforeStateQueue.pushCallback(p,h)}onIdTokenChanged(p,h,r){return this.registerStateListener(this.idTokenSubscription,p,h,r)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}async _setRedirectUser(p,h){const r=await this.getOrInitRedirectPersistenceManager(h);return null===p?r.removeCurrentUser():r.setCurrentUser(p)}async getOrInitRedirectPersistenceManager(p){if(!this.redirectPersistenceManager){const h=p&&R(p)||this._popupRedirectResolver;U(h,this,"argument-error"),this.redirectPersistenceManager=await b.create(this,[R(h._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(p){var h,r;return this._isInitialized&&await this.queue((async()=>{})),(null===(h=this._currentUser)||void 0===h?void 0:h._redirectEventId)===p?this._currentUser:(null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)===p?this.redirectUser:null}async _persistUserIfCurrent(p){if(p===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(p)))}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,h;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(h=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==h?h:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,h,r,m){if(this._deleted)return()=>{};const L="function"===typeof h?h:h.next.bind(h),z=this._isInitialized?Promise.resolve():this._initializationPromise;return U(z,this,"internal-error"),z.then((()=>L(this.currentUser))),"function"===typeof h?p.addObserver(h,r,m):p.addObserver(h)}async directlySetCurrentUser(p){this.currentUser&&this.currentUser!==p&&this._currentUser._stopProactiveRefresh(),p&&this.isProactiveRefreshEnabled&&p._startProactiveRefresh(),this.currentUser=p,p?await this.assertedPersistence.setCurrentUser(p):await this.assertedPersistence.removeCurrentUser()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){p&&!this.frameworks.includes(p)&&(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=xp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var p;const h={"X-Client-Version":this.clientVersion};this.app.options.appId&&(h["X-Firebase-gmpid"]=this.app.options.appId);const r=await(null===(p=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader());r&&(h["X-Firebase-Client"]=r);const m=await this._getAppCheckToken();return m&&(h["X-Firebase-AppCheck"]=m),h}async _getAppCheckToken(){var p;const h=await(null===(p=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken());return(null===h||void 0===h?void 0:h.error)&&function(p){if(s.logLevel<=C.e.WARN){for(var h=arguments.length,r=new Array(h>1?h-1:0),m=1;m<h;m++)r[m-1]=arguments[m];s.warn(`Auth (${L.d}): ${p}`,...r)}}(`Error while retrieving App Check token: ${h.error}`),null===h||void 0===h?void 0:h.token}}function jp(p){return(0,m.L)(p)}class cp{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,m.v)((p=>this.observer=p))}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Wp(p,h,r){const m=jp(p);U(m._canInitEmulator,m,"emulator-config-failed"),U(/^https?:\/\//.test(h),m,"invalid-emulator-scheme");const L=!!(null===r||void 0===r?void 0:r.disableWarnings),z=Kp(h),{host:C,port:v}=function(p){const h=Kp(p),r=/(\/\/)?([^?#/]+)/.exec(p.substr(h.length));if(!r)return{host:"",port:null};const m=r[2].split("@").pop()||"",L=/^(\[[^\]]+\])(:|$)/.exec(m);if(L){const p=L[1];return{host:p,port:Ap(m.substr(p.length+1))}}{const[p,h]=m.split(":");return{host:p,port:Ap(h)}}}(h),O=null===v?"":`:${v}`;m.config.emulator={url:`${z}//${C}${O}/`},m.settings.appVerificationDisabledForTesting=!0,m.emulatorConfig=Object.freeze({host:C,port:v,protocol:z.replace(":",""),options:Object.freeze({disableWarnings:L})}),L||function(){function p(){const p=document.createElement("p"),h=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",h.position="fixed",h.width="100%",h.backgroundColor="#ffffff",h.border=".1em solid #000000",h.color="#b50000",h.bottom="0px",h.left="0px",h.margin="0px",h.zIndex="10000",h.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}function Kp(p){const h=p.indexOf(":");return h<0?"":p.substr(0,h+1)}function Ap(p){if(!p)return null;const h=Number(p);return isNaN(h)?null:h}class Xp{constructor(p,h){this.providerId=p,this.signInMethod=h}toJSON(){return E("not implemented")}_getIdTokenResponse(p){return E("not implemented")}_linkToIdToken(p,h){return E("not implemented")}_getReauthenticationResolver(p){return E("not implemented")}}async function tp(p,h){return i(p,"POST","/v1/accounts:update",h)}async function fp(p,h){return S(p,"POST","/v1/accounts:signInWithPassword",N(p,h))}class Zp extends Xp{constructor(p,h,r){let m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",r),this._email=p,this._password=h,this._tenantId=m}static _fromEmailAndPassword(p,h){return new Zp(p,h,"password")}static _fromEmailAndCode(p,h){return new Zp(p,h,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const h="string"===typeof p?JSON.parse(p):p;if((null===h||void 0===h?void 0:h.email)&&(null===h||void 0===h?void 0:h.password)){if("password"===h.signInMethod)return this._fromEmailAndPassword(h.email,h.password);if("emailLink"===h.signInMethod)return this._fromEmailAndCode(h.email,h.password,h.tenantId)}return null}async _getIdTokenResponse(p){var h;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(h=p._getRecaptchaConfig())||void 0===h?void 0:h.emailPasswordEnabled){const h=await Ip(p,r,"signInWithPassword");return fp(p,h)}return fp(p,r).catch((async h=>{if("auth/missing-recaptcha-token"===h.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const h=await Ip(p,r,"signInWithPassword");return fp(p,h)}return Promise.reject(h)}));case"emailLink":return async function(p,h){return S(p,"POST","/v1/accounts:signInWithEmailLink",N(p,h))}(p,{email:this._email,oobCode:this._password});default:G(p,"internal-error")}}async _linkToIdToken(p,h){switch(this.signInMethod){case"password":return tp(p,{idToken:h,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(p,h){return S(p,"POST","/v1/accounts:signInWithEmailLink",N(p,h))}(p,{idToken:h,email:this._email,oobCode:this._password});default:G(p,"internal-error")}}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}async function Np(p,h){return S(p,"POST","/v1/accounts:signInWithIdp",N(p,h))}class ip extends Xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const h=new ip(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(h.idToken=p.idToken),p.accessToken&&(h.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(h.nonce=p.nonce),p.pendingToken&&(h.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(h.accessToken=p.oauthToken,h.secret=p.oauthTokenSecret):G("argument-error"),h}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const h="string"===typeof p?JSON.parse(p):p,{providerId:r,signInMethod:m}=h,L=z(h,["providerId","signInMethod"]);if(!r||!m)return null;const C=new ip(r,m);return C.idToken=L.idToken||void 0,C.accessToken=L.accessToken||void 0,C.secret=L.secret,C.nonce=L.nonce,C.pendingToken=L.pendingToken||null,C}_getIdTokenResponse(p){return Np(p,this.buildRequest())}_linkToIdToken(p,h){const r=this.buildRequest();return r.idToken=h,Np(p,r)}_getReauthenticationResolver(p){const h=this.buildRequest();return h.autoCreate=!1,Np(p,h)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const h={};this.idToken&&(h.id_token=this.idToken),this.accessToken&&(h.access_token=this.accessToken),this.secret&&(h.oauth_token_secret=this.secret),h.providerId=this.providerId,this.nonce&&!this.pendingToken&&(h.nonce=this.nonce),p.postBody=(0,m.eb)(h)}return p}}const wp={USER_NOT_FOUND:"user-not-found"};class Sp extends Xp{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,h){return new Sp({verificationId:p,verificationCode:h})}static _fromTokenResponse(p,h){return new Sp({phoneNumber:p,temporaryProof:h})}_getIdTokenResponse(p){return async function(p,h){return S(p,"POST","/v1/accounts:signInWithPhoneNumber",N(p,h))}(p,this._makeVerificationRequest())}_linkToIdToken(p,h){return async function(p,h){const r=await S(p,"POST","/v1/accounts:signInWithPhoneNumber",N(p,h));if(r.temporaryProof)throw o(p,"account-exists-with-different-credential",r);return r}(p,Object.assign({idToken:h},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return async function(p,h){return S(p,"POST","/v1/accounts:signInWithPhoneNumber",N(p,Object.assign(Object.assign({},h),{operation:"REAUTH"})),wp)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:h,verificationId:r,verificationCode:m}=this.params;return p&&h?{temporaryProof:p,phoneNumber:h}:{sessionInfo:r,code:m}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"===typeof p&&(p=JSON.parse(p));const{verificationId:h,verificationCode:r,phoneNumber:m,temporaryProof:L}=p;return r||h||m||L?new Sp({verificationId:h,verificationCode:r,phoneNumber:m,temporaryProof:L}):null}}class Qp{constructor(p){var h,r,L,z,C,v;const O=(0,m.cb)((0,m.z)(p)),T=null!==(h=O.apiKey)&&void 0!==h?h:null,x=null!==(r=O.oobCode)&&void 0!==r?r:null,s=function(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(L=O.mode)&&void 0!==L?L:null);U(T&&x&&s,"argument-error"),this.apiKey=T,this.operation=s,this.code=x,this.continueUrl=null!==(z=O.continueUrl)&&void 0!==z?z:null,this.languageCode=null!==(C=O.languageCode)&&void 0!==C?C:null,this.tenantId=null!==(v=O.tenantId)&&void 0!==v?v:null}static parseLink(p){const h=function(p){const h=(0,m.cb)((0,m.z)(p)).link,r=h?(0,m.cb)((0,m.z)(h)).deep_link_id:null,L=(0,m.cb)((0,m.z)(p)).deep_link_id;return(L?(0,m.cb)((0,m.z)(L)).link:null)||L||r||h||p}(p);try{return new Qp(h)}catch(p){return null}}}class Jp{constructor(){this.providerId=Jp.PROVIDER_ID}static credential(p,h){return Zp._fromEmailAndPassword(p,h)}static credentialWithLink(p,h){const r=Qp.parseLink(h);return U(r,"argument-error"),Zp._fromEmailAndCode(p,r.code,r.tenantId)}}Jp.PROVIDER_ID="password",Jp.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Jp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class op{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class dp extends op{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ep extends dp{constructor(){super("facebook.com")}static credential(p){return ip._fromParams({providerId:ep.PROVIDER_ID,signInMethod:ep.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return ep.credentialFromTaggedObject(p)}static credentialFromError(p){return ep.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject(p){let{_tokenResponse:h}=p;if(!h||!("oauthAccessToken"in h))return null;if(!h.oauthAccessToken)return null;try{return ep.credential(h.oauthAccessToken)}catch(p){return null}}}ep.FACEBOOK_SIGN_IN_METHOD="facebook.com",ep.PROVIDER_ID="facebook.com";class Fp extends dp{constructor(){super("google.com"),this.addScope("profile")}static credential(p,h){return ip._fromParams({providerId:Fp.PROVIDER_ID,signInMethod:Fp.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:h})}static credentialFromResult(p){return Fp.credentialFromTaggedObject(p)}static credentialFromError(p){return Fp.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject(p){let{_tokenResponse:h}=p;if(!h)return null;const{oauthIdToken:r,oauthAccessToken:m}=h;if(!r&&!m)return null;try{return Fp.credential(r,m)}catch(p){return null}}}Fp.GOOGLE_SIGN_IN_METHOD="google.com",Fp.PROVIDER_ID="google.com";class yp extends dp{constructor(){super("github.com")}static credential(p){return ip._fromParams({providerId:yp.PROVIDER_ID,signInMethod:yp.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return yp.credentialFromTaggedObject(p)}static credentialFromError(p){return yp.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject(p){let{_tokenResponse:h}=p;if(!h||!("oauthAccessToken"in h))return null;if(!h.oauthAccessToken)return null;try{return yp.credential(h.oauthAccessToken)}catch(p){return null}}}yp.GITHUB_SIGN_IN_METHOD="github.com",yp.PROVIDER_ID="github.com";class Vp extends dp{constructor(){super("twitter.com")}static credential(p,h){return ip._fromParams({providerId:Vp.PROVIDER_ID,signInMethod:Vp.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:h})}static credentialFromResult(p){return Vp.credentialFromTaggedObject(p)}static credentialFromError(p){return Vp.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject(p){let{_tokenResponse:h}=p;if(!h)return null;const{oauthAccessToken:r,oauthTokenSecret:m}=h;if(!r||!m)return null;try{return Vp.credential(r,m)}catch(p){return null}}}Vp.TWITTER_SIGN_IN_METHOD="twitter.com",Vp.PROVIDER_ID="twitter.com";class np{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static async _fromIdTokenResponse(p,h,r){let m=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const L=await g._fromIdTokenResponse(p,r,m),z=ap(r);return new np({user:L,providerId:z,_tokenResponse:r,operationType:h})}static async _forOperation(p,h,r){await p._updateTokensIfNecessary(r,!0);const m=ap(r);return new np({user:p,providerId:m,_tokenResponse:r,operationType:h})}}function ap(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}class Bp extends m.h{constructor(p,h,r,m){var L;super(h.code,h.message),this.operationType=r,this.user=m,Object.setPrototypeOf(this,Bp.prototype),this.customData={appName:p.name,tenantId:null!==(L=p.tenantId)&&void 0!==L?L:void 0,_serverResponse:h.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(p,h,r,m){return new Bp(p,h,r,m)}}function up(p,h,r,m){return("reauthenticate"===h?r._getReauthenticationResolver(p):r._getIdTokenResponse(p)).catch((r=>{if("auth/multi-factor-auth-required"===r.code)throw Bp._fromErrorAndOperation(p,r,h,m);throw r}))}async function gp(p,h){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const m=await y(p,h._linkToIdToken(p.auth,await p.getIdToken()),r);return np._forOperation(p,"link",m)}async function qp(p,h){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:m}=p,L="reauthenticate";try{const z=await y(p,up(m,L,h,p),r);U(z.idToken,m,"internal-error");const C=F(z.idToken);U(C,m,"internal-error");const{sub:v}=C;return U(p.uid===v,m,"user-mismatch"),np._forOperation(p,L,z)}catch(p){throw"auth/user-not-found"===(null===p||void 0===p?void 0:p.code)&&G(m,"user-mismatch"),p}}async function Rp(p,h){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const m="signIn",L=await up(p,m,h),z=await np._fromIdTokenResponse(p,m,L);return r||await p._updateCurrentUser(z.user),z}function lp(p,h,r,L){return(0,m.L)(p).onIdTokenChanged(h,r,L)}function Yp(p){(0,m.L)(p).useDeviceLanguage()}function Dp(p){return(0,m.L)(p).signOut()}new WeakMap;const bp="__sak";class ph{constructor(p,h){this.storageRetriever=p,this.type=h}_isAvailable(){try{return this.storage?(this.storage.setItem(bp,"1"),this.storage.removeItem(bp),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,h){return this.storage.setItem(p,JSON.stringify(h)),Promise.resolve()}_get(p){const h=this.storage.getItem(p);return Promise.resolve(h?JSON.parse(h):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}class hh extends ph{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(p,h)=>this.onStorageEvent(p,h),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const p=(0,m.O)();return rp(p)||Op(p)}()&&function(){try{return!(!window||window===window.top)}catch(p){return!1}}(),this.fallbackToPolling=Tp(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const h of Object.keys(this.listeners)){const r=this.storage.getItem(h),m=this.localCache[h];r!==m&&p(h,m,r)}}onStorageEvent(p){let h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!p.key)return void this.forAllChangedKeys(((p,h,r)=>{this.notifyListeners(p,r)}));const r=p.key;if(h?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const m=this.storage.getItem(r);if(p.newValue!==m)null!==p.newValue?this.storage.setItem(r,p.newValue):this.storage.removeItem(r);else if(this.localCache[r]===p.newValue&&!h)return}const L=()=>{const p=this.storage.getItem(r);(h||this.localCache[r]!==p)&&this.notifyListeners(r,p)},z=this.storage.getItem(r);(0,m.U)()&&10===document.documentMode&&z!==p.newValue&&p.newValue!==p.oldValue?setTimeout(L,10):L()}notifyListeners(p,h){this.localCache[p]=h;const r=this.listeners[p];if(r)for(const p of Array.from(r))p(h?JSON.parse(h):h)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((p,h,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:h,newValue:r}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,h){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(h)}_removeListener(p,h){this.listeners[p]&&(this.listeners[p].delete(h),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(p,h){await super._set(p,h),this.localCache[p]=JSON.stringify(h)}async _get(p){const h=await super._get(p);return this.localCache[p]=JSON.stringify(h),h}async _remove(p){await super._remove(p),delete this.localCache[p]}}hh.type="LOCAL";const rh=hh;class mh extends ph{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(p,h){}_removeListener(p,h){}}mh.type="SESSION";const Lh=mh;class zh{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const h=this.receivers.find((h=>h.isListeningto(p)));if(h)return h;const r=new zh(p);return this.receivers.push(r),r}isListeningto(p){return this.eventTarget===p}async handleEvent(p){const h=p,{eventId:r,eventType:m,data:L}=h.data,z=this.handlersMap[m];if(!(null===z||void 0===z?void 0:z.size))return;h.ports[0].postMessage({status:"ack",eventId:r,eventType:m});const C=Array.from(z).map((async p=>p(h.origin,L))),v=await function(p){return Promise.all(p.map((async p=>{try{return{fulfilled:!0,value:await p}}catch(p){return{fulfilled:!1,reason:p}}})))}(C);h.ports[0].postMessage({status:"done",eventId:r,eventType:m,response:v})}_subscribe(p,h){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(h)}_unsubscribe(p,h){this.handlersMap[p]&&h&&this.handlersMap[p].delete(h),h&&0!==this.handlersMap[p].size||delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ch(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r="";for(let p=0;p<h;p++)r+=Math.floor(10*Math.random());return p+r}zh.receivers=[];class vh{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}async _send(p,h){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const m="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!m)throw new Error("connection_unavailable");let L,z;return new Promise(((C,v)=>{const O=Ch("",20);m.port1.start();const T=setTimeout((()=>{v(new Error("unsupported_event"))}),r);z={messageChannel:m,onMessage(p){const h=p;if(h.data.eventId===O)switch(h.data.status){case"ack":clearTimeout(T),L=setTimeout((()=>{v(new Error("timeout"))}),3e3);break;case"done":clearTimeout(L),C(h.data.response);break;default:clearTimeout(T),clearTimeout(L),v(new Error("invalid_response"))}}},this.handlers.add(z),m.port1.addEventListener("message",z.onMessage),this.target.postMessage({eventType:p,eventId:O,data:h},[m.port2])})).finally((()=>{z&&this.removeMessageHandler(z)}))}}function Oh(){return window}function Th(){return"undefined"!==typeof Oh().WorkerGlobalScope&&"function"===typeof Oh().importScripts}const xh="firebaseLocalStorageDb",sh="firebaseLocalStorage",Ph="fbase_key";class Gh{constructor(p){this.request=p}toPromise(){return new Promise(((p,h)=>{this.request.addEventListener("success",(()=>{p(this.request.result)})),this.request.addEventListener("error",(()=>{h(this.request.error)}))}))}}function kh(p,h){return p.transaction([sh],h?"readwrite":"readonly").objectStore(sh)}function Mh(){const p=indexedDB.open(xh,1);return new Promise(((h,r)=>{p.addEventListener("error",(()=>{r(p.error)})),p.addEventListener("upgradeneeded",(()=>{const h=p.result;try{h.createObjectStore(sh,{keyPath:Ph})}catch(p){r(p)}})),p.addEventListener("success",(async()=>{const r=p.result;r.objectStoreNames.contains(sh)?h(r):(r.close(),await function(){const p=indexedDB.deleteDatabase(xh);return new Gh(p).toPromise()}(),h(await Mh()))}))}))}async function Hh(p,h,r){const m=kh(p,!0).put({[Ph]:h,value:r});return new Gh(m).toPromise()}function Ih(p,h){const r=kh(p,!0).delete(h);return new Gh(r).toPromise()}class Uh{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Mh()),this.db}async _withRetries(p){let h=0;for(;;)try{const h=await this._openDb();return await p(h)}catch(p){if(h++>3)throw p;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Th()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zh._getInstance(Th()?self:null),this.receiver._subscribe("keyChanged",(async(p,h)=>({keyProcessed:(await this._poll()).includes(h.key)}))),this.receiver._subscribe("ping",(async(p,h)=>["keyChanged"]))}async initializeSender(){var p,h;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(p){return null}}(),!this.activeServiceWorker)return;this.sender=new vh(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&(null===(p=r[0])||void 0===p?void 0:p.fulfilled)&&(null===(h=r[0])||void 0===h?void 0:h.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(p){if(this.sender&&this.activeServiceWorker&&function(){var p;return(null===(p=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===p?void 0:p.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:p},this.serviceWorkerReceiverAvailable?800:50)}catch(p){}}async _isAvailable(){try{if(!indexedDB)return!1;const p=await Mh();return await Hh(p,bp,"1"),await Ih(p,bp),!0}catch(p){}return!1}async _withPendingWrite(p){this.pendingWrites++;try{await p()}finally{this.pendingWrites--}}async _set(p,h){return this._withPendingWrite((async()=>(await this._withRetries((r=>Hh(r,p,h))),this.localCache[p]=h,this.notifyServiceWorker(p))))}async _get(p){const h=await this._withRetries((h=>async function(p,h){const r=kh(p,!1).get(h),m=await new Gh(r).toPromise();return void 0===m?null:m.value}(h,p)));return this.localCache[p]=h,h}async _remove(p){return this._withPendingWrite((async()=>(await this._withRetries((h=>Ih(h,p))),delete this.localCache[p],this.notifyServiceWorker(p))))}async _poll(){const p=await this._withRetries((p=>{const h=kh(p,!1).getAll();return new Gh(h).toPromise()}));if(!p)return[];if(0!==this.pendingWrites)return[];const h=[],r=new Set;for(const{fbase_key:m,value:L}of p)r.add(m),JSON.stringify(this.localCache[m])!==JSON.stringify(L)&&(this.notifyListeners(m,L),h.push(m));for(const p of Object.keys(this.localCache))this.localCache[p]&&!r.has(p)&&(this.notifyListeners(p,null),h.push(p));return h}notifyListeners(p,h){this.localCache[p]=h;const r=this.listeners[p];if(r)for(const p of Array.from(r))p(h)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,h){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(h)}_removeListener(p,h){this.listeners[p]&&(this.listeners[p].delete(h),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Uh.type="LOCAL";const Eh=Uh;Mp("rcb"),new A(3e4,6e4);const jh="recaptcha";async function ch(p,h,r){var m;const L=await r.verify();try{let z;if(U("string"===typeof L,p,"argument-error"),U(r.type===jh,p,"argument-error"),z="string"===typeof h?{phoneNumber:h}:h,"session"in z){const h=z.session;if("phoneNumber"in z){U("enroll"===h.type,p,"internal-error");const r=await function(p,h){return i(p,"POST","/v2/accounts/mfaEnrollment:start",N(p,h))}(p,{idToken:h.credential,phoneEnrollmentInfo:{phoneNumber:z.phoneNumber,recaptchaToken:L}});return r.phoneSessionInfo.sessionInfo}{U("signin"===h.type,p,"internal-error");const r=(null===(m=z.multiFactorHint)||void 0===m?void 0:m.uid)||z.multiFactorUid;U(r,p,"missing-multi-factor-info");const C=await function(p,h){return i(p,"POST","/v2/accounts/mfaSignIn:start",N(p,h))}(p,{mfaPendingCredential:h.credential,mfaEnrollmentId:r,phoneSignInInfo:{recaptchaToken:L}});return C.phoneResponseInfo.sessionInfo}}{const{sessionInfo:h}=await async function(p,h){return i(p,"POST","/v1/accounts:sendVerificationCode",N(p,h))}(p,{phoneNumber:z.phoneNumber,recaptchaToken:L});return h}}finally{r._reset()}}class Wh{constructor(p){this.providerId=Wh.PROVIDER_ID,this.auth=jp(p)}verifyPhoneNumber(p,h){return ch(this.auth,p,(0,m.L)(h))}static credential(p,h){return Sp._fromVerification(p,h)}static credentialFromResult(p){const h=p;return Wh.credentialFromTaggedObject(h)}static credentialFromError(p){return Wh.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject(p){let{_tokenResponse:h}=p;if(!h)return null;const{phoneNumber:r,temporaryProof:m}=h;return r&&m?Sp._fromTokenResponse(r,m):null}}function Kh(p,h){return h?R(h):(U(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}Wh.PROVIDER_ID="phone",Wh.PHONE_SIGN_IN_METHOD="phone";class Ah extends Xp{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Np(p,this._buildIdpRequest())}_linkToIdToken(p,h){return Np(p,this._buildIdpRequest(h))}_getReauthenticationResolver(p){return Np(p,this._buildIdpRequest())}_buildIdpRequest(p){const h={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(h.idToken=p),h}}function Xh(p){return Rp(p.auth,new Ah(p),p.bypassAuthState)}function th(p){const{auth:h,user:r}=p;return U(r,h,"internal-error"),qp(r,new Ah(p),p.bypassAuthState)}async function fh(p){const{auth:h,user:r}=p;return U(r,h,"internal-error"),gp(r,new Ah(p),p.bypassAuthState)}class Zh{constructor(p,h,r,m){let L=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=p,this.resolver=r,this.user=m,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(h)?h:[h]}execute(){return new Promise((async(p,h)=>{this.pendingPromise={resolve:p,reject:h};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(p){this.reject(p)}}))}async onAuthEvent(p){const{urlResponse:h,sessionId:r,postBody:m,tenantId:L,error:z,type:C}=p;if(z)return void this.reject(z);const v={auth:this.auth,requestUri:h,sessionId:r,tenantId:L||void 0,postBody:m||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(C)(v))}catch(p){this.reject(p)}}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Xh;case"linkViaPopup":case"linkViaRedirect":return fh;case"reauthViaPopup":case"reauthViaRedirect":return th;default:G(this.auth,"internal-error")}}resolve(p){j(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){j(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Nh=new A(2e3,1e4);async function ih(p,h,r){const m=jp(p);H(p,h,op);const L=Kh(m,r);return new wh(m,"signInViaPopup",h,L).executeNotNull()}class wh extends Zh{constructor(p,h,r,m,L){super(p,h,m,L),this.provider=r,this.authWindow=null,this.pollId=null,wh.currentPopupAction&&wh.currentPopupAction.cancel(),wh.currentPopupAction=this}async executeNotNull(){const p=await this.execute();return U(p,this.auth,"internal-error"),p}async onExecution(){j(1===this.filter.length,"Popup operations only handle one event");const p=Ch();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],p),this.authWindow.associatedEvent=p,this.resolver._originValidation(this.auth).catch((p=>{this.reject(p)})),this.resolver._isIframeWebStorageSupported(this.auth,(p=>{p||this.reject(k(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(k(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wh.currentPopupAction=null}pollUserCancellation(){const p=()=>{var h,r;(null===(r=null===(h=this.authWindow)||void 0===h?void 0:h.window)||void 0===r?void 0:r.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(k(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(p,Nh.get())};p()}}wh.currentPopupAction=null;const Sh=new Map;class Qh extends Zh{constructor(p,h){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],h,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let p=Sh.get(this.auth._key());if(!p){try{const h=await async function(p,h){const r=dh(h),m=oh(p);if(!await m._isAvailable())return!1;const L="true"===await m._get(r);return await m._remove(r),L}(this.resolver,this.auth)?await super.execute():null;p=()=>Promise.resolve(h)}catch(h){p=()=>Promise.reject(h)}Sh.set(this.auth._key(),p)}return this.bypassAuthState||Sh.set(this.auth._key(),(()=>Promise.resolve(null))),p()}async onAuthEvent(p){if("signInViaRedirect"===p.type)return super.onAuthEvent(p);if("unknown"!==p.type){if(p.eventId){const h=await this.auth._redirectUserForId(p.eventId);if(h)return this.user=h,super.onAuthEvent(p);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Jh(p,h){Sh.set(p._key(),h)}function oh(p){return R(p._redirectPersistence)}function dh(p){return D("pendingRedirect",p.config.apiKey,p.name)}async function eh(p,h){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const m=jp(p),L=Kh(m,h),z=new Qh(m,L,r),C=await z.execute();return C&&!r&&(delete C.user._redirectEventId,await m._persistUserIfCurrent(C.user),await m._setRedirectUser(null,h)),C}class Fh{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let h=!1;return this.consumers.forEach((r=>{this.isEventForConsumer(p,r)&&(h=!0,this.sendToConsumer(p,r),this.saveEventToCache(p))})),this.hasHandledPotentialRedirect||!function(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vh(p);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,h||(this.queuedRedirectEvent=p,h=!0)),h}sendToConsumer(p,h){var r;if(p.error&&!Vh(p)){const m=(null===(r=p.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";h.onError(k(this.auth,m))}else h.onAuthEvent(p)}isEventForConsumer(p,h){const r=null===h.eventId||!!p.eventId&&p.eventId===h.eventId;return h.filter.includes(p.type)&&r}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yh(p))}saveEventToCache(p){this.cachedEventUids.add(yh(p)),this.lastProcessedEventTime=Date.now()}}function yh(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter((p=>p)).join("-")}function Vh(p){let{type:h,error:r}=p;return"unknown"===h&&"auth/no-auth-event"===(null===r||void 0===r?void 0:r.code)}const nh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ah=/^https?/;async function Bh(p){if(p.config.emulator)return;const{authorizedDomains:h}=await async function(p){return i(p,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(p);for(const p of h)try{if(uh(p))return}catch(p){}G(p,"unauthorized-domain")}function uh(p){const h=c(),{protocol:r,hostname:m}=new URL(h);if(p.startsWith("chrome-extension://")){const L=new URL(p);return""===L.hostname&&""===m?"chrome-extension:"===r&&p.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===r&&L.hostname===m}if(!ah.test(r))return!1;if(nh.test(p))return m===p;const L=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+L+"|"+L+")$","i").test(m)}const gh=new A(3e4,6e4);function qh(){const p=Oh().___jsl;if(null===p||void 0===p?void 0:p.H)for(const h of Object.keys(p.H))if(p.H[h].r=p.H[h].r||[],p.H[h].L=p.H[h].L||[],p.H[h].r=[...p.H[h].L],p.CP)for(let h=0;h<p.CP.length;h++)p.CP[h]=null}let Rh=null;function lh(p){return Rh=Rh||function(p){return new Promise(((h,r)=>{var m,L,z;function C(){qh(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{qh(),r(k(p,"network-request-failed"))},timeout:gh.get()})}if(null===(L=null===(m=Oh().gapi)||void 0===m?void 0:m.iframes)||void 0===L?void 0:L.Iframe)h(gapi.iframes.getContext());else{if(!(null===(z=Oh().gapi)||void 0===z?void 0:z.load)){const h=Mp("iframefcb");return Oh()[h]=()=>{gapi.load?C():r(k(p,"network-request-failed"))},kp(`https://apis.google.com/js/api.js?onload=${h}`).catch((p=>r(p)))}C()}})).catch((p=>{throw Rh=null,p}))}(p),Rh}const Yh=new A(5e3,15e3),Dh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pr(p){const h=p.config;U(h.authDomain,p,"auth-domain-config-required");const r=h.emulator?X(h,"emulator/auth/iframe"):`https://${p.config.authDomain}/__/auth/iframe`,z={apiKey:h.apiKey,appName:p.name,v:L.d},C=bh.get(p.config.apiHost);C&&(z.eid=C);const v=p._getFrameworks();return v.length&&(z.fw=v.join(",")),`${r}?${(0,m.eb)(z).slice(1)}`}const hr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rr{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function mr(p,h,r){let L=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,z=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const C=Math.max((window.screen.availHeight-z)/2,0).toString(),v=Math.max((window.screen.availWidth-L)/2,0).toString();let O="";const T=Object.assign(Object.assign({},hr),{width:L.toString(),height:z.toString(),top:C,left:v}),x=(0,m.O)().toLowerCase();r&&(O=mp(x)?"_blank":r),hp(x)&&(h=h||"http://localhost",T.scrollbars="yes");const s=Object.entries(T).reduce(((p,h)=>{let[r,m]=h;return`${p}${r}=${m},`}),"");if(function(){var p;return Op(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,m.O)())&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(x)&&"_self"!==O)return function(p,h){const r=document.createElement("a");r.href=p,r.target=h;const m=document.createEvent("MouseEvent");m.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(m)}(h||"",O),new rr(null);const P=window.open(h||"",O,s);U(P,p,"popup-blocked");try{P.focus()}catch(p){}return new rr(P)}const Lr="__/auth/handler",zr="emulator/auth/handler",Cr=encodeURIComponent("fac");async function vr(p,h,r,z,C,v){U(p.config.authDomain,p,"auth-domain-config-required"),U(p.config.apiKey,p,"invalid-api-key");const O={apiKey:p.config.apiKey,appName:p.name,authType:r,redirectUrl:z,v:L.d,eventId:C};if(h instanceof op){h.setDefaultLanguage(p.languageCode),O.providerId=h.providerId||"",(0,m.T)(h.getCustomParameters())||(O.customParameters=JSON.stringify(h.getCustomParameters()));for(const[p,h]of Object.entries(v||{}))O[p]=h}if(h instanceof dp){const p=h.getScopes().filter((p=>""!==p));p.length>0&&(O.scopes=p.join(","))}p.tenantId&&(O.tid=p.tenantId);const T=O;for(const p of Object.keys(T))void 0===T[p]&&delete T[p];const x=await p._getAppCheckToken(),s=x?`#${Cr}=${encodeURIComponent(x)}`:"";return`${function(p){let{config:h}=p;if(!h.emulator)return`https://${h.authDomain}/${Lr}`;return X(h,zr)}(p)}?${(0,m.eb)(T).slice(1)}${s}`}const Or="webStorageSupport";const Tr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lh,this._completeRedirectFn=eh,this._overrideRedirectResult=Jh}async _openPopup(p,h,r,m){var L;j(null===(L=this.eventManagers[p._key()])||void 0===L?void 0:L.manager,"_initialize() not called before _openPopup()");return mr(p,await vr(p,h,r,c(),m),Ch())}async _openRedirect(p,h,r,m){await this._originValidation(p);return function(p){Oh().location.href=p}(await vr(p,h,r,c(),m)),new Promise((()=>{}))}_initialize(p){const h=p._key();if(this.eventManagers[h]){const{manager:p,promise:r}=this.eventManagers[h];return p?Promise.resolve(p):(j(r,"If manager is not set, promise should be"),r)}const r=this.initAndGetManager(p);return this.eventManagers[h]={promise:r},r.catch((()=>{delete this.eventManagers[h]})),r}async initAndGetManager(p){const h=await async function(p){const h=await lh(p),r=Oh().gapi;return U(r,p,"internal-error"),h.open({where:document.body,url:pr(p),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dh,dontclear:!0},(h=>new Promise((async(r,m)=>{await h.restyle({setHideOnLeave:!1});const L=k(p,"network-request-failed"),z=Oh().setTimeout((()=>{m(L)}),Yh.get());function C(){Oh().clearTimeout(z),r(h)}h.ping(C).then(C,(()=>{m(L)}))}))))}(p),r=new Fh(p);return h.register("authEvent",(h=>{U(null===h||void 0===h?void 0:h.authEvent,p,"invalid-auth-event");return{status:r.onEvent(h.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[p._key()]={manager:r},this.iframes[p._key()]=h,r}_isIframeWebStorageSupported(p,h){this.iframes[p._key()].send(Or,{type:Or},(r=>{var m;const L=null===(m=null===r||void 0===r?void 0:r[0])||void 0===m?void 0:m[Or];void 0!==L&&h(!!L),G(p,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const h=p._key();return this.originValidationPromises[h]||(this.originValidationPromises[h]=Bh(p)),this.originValidationPromises[h]}get _shouldInitProactively(){return Tp()||rp()||Op()}};var xr="@firebase/auth",sr="0.23.2";class Pr{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}async getToken(p){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(p)}}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const h=this.auth.onIdTokenChanged((h=>{p((null===h||void 0===h?void 0:h.stsTokenManager.accessToken)||null)}));this.internalListeners.set(p,h),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const h=this.internalListeners.get(p);h&&(this.internalListeners.delete(p),h(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Gr=(0,m.H)("authIdTokenMaxAge")||300;let kr=null;const Mr=p=>async h=>{const r=h&&await h.getIdTokenResult(),m=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(m&&m>Gr)return;const L=null===r||void 0===r?void 0:r.token;kr!==L&&(kr=L,await fetch(p,{method:L?"POST":"DELETE",headers:L?{Authorization:`Bearer ${L}`}:{}}))};function Hr(){let p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,L.j)();const h=(0,L.f)(p,"auth");if(h.isInitialized())return h.getImmediate();const r=function(p,h){const r=(0,L.f)(p,"auth");if(r.isInitialized()){const p=r.getImmediate(),L=r.getOptions();if((0,m.w)(L,null!==h&&void 0!==h?h:{}))return p;G(p,"already-initialized")}return r.initialize({options:h})}(p,{popupRedirectResolver:Tr,persistence:[Eh,rh,Lh]}),z=(0,m.H)("authTokenSyncURL");if(z){const p=Mr(z);!function(p,h,r){(0,m.L)(p).beforeAuthStateChanged(h,r)}(r,p,(()=>p(r.currentUser))),lp(r,(h=>p(h)))}const C=(0,m.E)("auth");return C&&Wp(r,`http://${C}`),r}var Ir;Ir="Browser",(0,L.g)(new v.g("auth",((p,h)=>{let{options:r}=h;const m=p.getProvider("app").getImmediate(),L=p.getProvider("heartbeat"),z=p.getProvider("app-check-internal"),{apiKey:C,authDomain:v}=m.options;U(C&&!C.includes(":"),"invalid-api-key",{appName:m.name});const O={apiKey:C,authDomain:v,clientPlatform:Ir,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xp(Ir)},T=new Ep(m,L,z,O);return function(p,h){const r=(null===h||void 0===h?void 0:h.persistence)||[],m=(Array.isArray(r)?r:[r]).map(R);(null===h||void 0===h?void 0:h.errorMap)&&p._updateErrorMap(h.errorMap),p._initializeWithPersistence(m,null===h||void 0===h?void 0:h.popupRedirectResolver)}(T,r),T}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((p,h,r)=>{p.getProvider("auth-internal").initialize()}))),(0,L.g)(new v.g("auth-internal",(p=>(p=>new Pr(p))(jp(p.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.m)(xr,sr,function(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ir)),(0,L.m)(xr,sr,"esm2017")}}]);